<!-- /home/qt/dist/qtopia/2-latest/qtopia-free-2.2.0/qtopia/doc/src2/i18n-qtopia.doc:1 -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Qtopia Internationalization</title>
<style type="text/css"><!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
body { background: #ffffff; color: black; }
--></style>
</head>
<body>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top"><a href="index.html"><img height="27" width="472" src="../pics/dochead.png" border="0"></a><br>
<font face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular" align="center" size=32>Qtopia</font>
   <a href="index.html">Home</a>
 - <a href="classes.html">Classes</a>
 - <a href="hierarchy.html">Hierachy</a>
 - <a href="annotated.html">Annotated</a>
 - <a href="functions.html">Functions</a>
 - <a href="all_qtopia_licenses.html">Licenses</a>
 - <a href="references.html">Reference</a>
</td>
<td align="right" valign="top">
  <img height="100" width="100" src="../pics/qpelogo.png" align="top" border="0">
</td>
</tr>
</table><h1 align=center>Qtopia Internationalization</h1>


<p> 
<p> <a name="top"></a>
<p> <!-- toc -->
<ul>
<li><a href="#1"> Introduction
</a>
<li><a href="#2"> Language Packages
</a>
<li><a href="#3"> Translating Qtopia
</a>
<ul>
<li><a href="#3-1"> Install Qt 3
</a>
<li><a href="#3-2"> Getting Started Translating
</a>
<li><a href="#3-3"> Language description
</a>
<li><a href="#3-4"> Translating Qtopia using Linguist
</a>
<li><a href="#3-5"> Installing translation files
</a>
</ul>
<li><a href="#4"> Fonts
</a>
<li><a href="#5"> Program Internationalization
</a>
<ul>
<li><a href="#5-1"> Placing Application Files
</a>
<li><a href="#5-2"> Placing Plug-in Files
</a>
</ul>
<li><a href="#6"> Desktop & Configuration File Internationalization
</a>
<li><a href="#7"> Image Translation
</a>
<li><a href="#8"> Documentation Internationalization
</a>
<li><a href="#9"> Other Internationalization Files
</a>
<li><a href="#10"> Translating Your Own Applications
</a>
</ul>
<!-- endtoc -->

<p> <h2> Introduction
</h2>
<a name="1"></a><p> Qtopia can be translated into several languages. By default Qtopia ships only with English. Additional languages can be acquired from Trolltech. For further information please contact <a href="mailto:sales@trolltech.com">sales@trolltech.com</a>.
<p> Internationalizing Qtopia software is much the same as internationalizing any Qt-based software. You should be familiar with the <a href=http://doc.trolltech.com/2.3/i18n.html>Qt internationalization documentation</a>, the <tt>tr()</tt> macros, <a href="linguist-manual.html"><em>Qt Linguist</em></a> from Qt 3.3 or later, and the internationalization process in general before you proceed with this
document.
<p> Note that since Qt 2 does not incorporate right-to-left writing support Qtopia (which is based on Qt 2) cannot be translated into any of the languages, such as Arabic and Hebrew, that require this feature.
<p> <a name="LangPack"></a>
<h2> Language Packages
</h2>
<a name="2"></a><p> Language-specific packages are available on request by contacting:
<a href="mailto:sales@trolltech.com">sales@trolltech.com</a>.
<p> After becoming a Qtopia customer, Trolltech will create an FTP directory for each customer account.The user can log in to the FTP directory using any browser and download the language package(s). 
<p> Once the relevant language package is downloaded the steps are as follows:
<p> <ol type=1>
<li>  <tt>cd</tt> into the Qtopia directory installation directory - $QPEDIR. 
<li> Extract the package using the following command:
<pre>
   tar -xzf mypackage 
</pre>
 
<p> <li> Configure Qtopia as described in <a href="build-from-source.html"> Building Qtopia</a>.
<p> </ol>
<p> <b>Note: </b> No special configuration options are required as the Qtopia build detects the new language files automatically. 
<p> If you are using an SDK and you don't have the convinience of the qtopia build system at hand you have to run <tt>lrelease</tt> manually for each ts file and put the resulting qm file into <tt>$QPEDIR/i18n/&lt;yourlang&gt;</tt>.
<p> <h2> Translating Qtopia
</h2>
<a name="3"></a><p> Adding a translation for Qtopia is easy. There are a few steps you will need to take in order to successfully translate Qtopia into your chosen language.
<p> <ol type=1>
<li> <a href=#install>Install Qt 3.x, which includes linguist, lupdate and lrelease.</a>
<li> <a href=#linguist>Run lupdate and lrelease, and start using Trolltech's linguist<a/>
<li> <a href=#description>Add language description</a>
<li> <a href=#translate>Translate the strings using the Linguist tool</a>
<li> <a href=#lrelease>Install translation files</a>
</ol>
<p> To translate Qtopia into an additional language you must perform the translation process described above for all the application, desktop and config files, and any help documentation that you wish to have available in that language.
<p> <a name=install></a>
<h3> Install Qt 3
</h3>
<a name="3-1"></a><p> You can either install Qt 3 for X11 from your linux distribution, or download the <a href="ftp://ftp.trolltech.com/qt/source/qt-x11-free-3.3.4.tar.bz2">Qt 3 source</a>, and compile it yourself. Once installed, you should have linguist, lupdate and lrelease tools available for you to use.
<p> <a name=linguist></a>
<h3> Getting Started Translating
</h3>
<a name="3-2"></a><p> The first step is to tell Qtopia where Qt3 is installed. This is done by setting the environment variable <tt>DQTDIR</tt> to the location of your Qt3 directory. Not having set this variable will prevent that configure generates the necessary installation rules.
<p> Qtopia ships without any translation files. If you want to generate translation files for your chosen language you have to reconfigure Qtopia:
<p> <tt>$QPEDIR/configure -languages "ja fr zh_CN" &lt;other configure options&gt;</tt>
<p> This will tell the build system that it has to build translation files for Japanese, French and Simplified Chinese.  
<p> The second step is to run the command <code>make lupdate</code> in the Qtopia (<tt>$QPEDIR</tt>) directory. This makes sure all the files necessary for translation exist and are up to date.
<p> The make lupdate process generates translation files for each language specified via Qtopia's configure option <tt>languages</tt>. The general naming convention for these files is <tt>appname-&lt;your-lang&gt;.ts</tt> (e.g. <tt>sysinfo-zh_CN.ts</tt>).
<p> As the last step the script <tt>$QPEDIR/bin/nct_lupdate</tt> is executed in order to generate translation files for those strings that cannot be found in source code. This includes most config and desktop files in the <tt>$QPEDIR</tt> directory. Each of these config/desktop files must have a Translation group similar to the following one which can be found in <tt>$QPEDIR/apps/Applications/clock.desktop</tt>:
<p> <pre>
[Translation]
File=QtopiaApplications
Context=Clock
</pre>
 
<p> This causes the generation of the file <tt>QtopiaApplications.ts</tt> in <tt>$QPEDIR/i18n/your-lang</tt>. Please read the <a href="buildsystem.html#non_code_translatables">build system</a> page for more information about non-code translatable files.
<p> <a name=description></a>
<h3> Language description
</h3>
<a name="3-3"></a><p> Running the command <code>make lupdate</code> will create the directory <tt>$QPEDIR/i18n/new-lang</tt> and server specific translation files (e.g. <tt>QtopiaApplications.ts</tt>) which contains the translated names for Qtopia applications. In addition to these automatically generated files every language needs a <tt>.directory</tt> file. For example, the German <tt>.directory</tt> in <tt>$QPEDIR/i18n/de</tt> looks like this:
<p> <pre>
[Translation]
File=QtopiaI18N
Context=German
[Desktop Entry]
Name[]=German
</pre>
 
<p> This file has to be added manually <em>before</em> <code>make lupdate</code> has been executed or you will need to run <tt>make lupdate</tt> again. It contains the name of the language itself as it is presented to the user.
<p> <a name=translate></a>
<h3> Translating Qtopia using Linguist
</h3>
<a name="3-4"></a><p> <a href=http://doc.trolltech.com/3.3/linguist-manual.html>Linguist Manual</a>
<p> The next step is to run the linguist tool. Linguist makes it easy to work with translations. It supports incremental translation, which helps you keep track of any additional content that is added to Qtopia and needs translating.
<p> Any strings that are ambiguous or otherwise unclear or suspect in some way should be translated to whatever degree it is possible, and then left in the <em>unfinished</em> state.
<p> <a name=lrelease></a>
<h3> Installing translation files
</h3>
<a name="3-5"></a><p> The last step is to run the command <tt>make install</tt> in the Qtopia (<tt>$QPEDIR</tt>) directory. As part of this process lrelease is used to create Qt message files (<tt>.qm</tt> files).
<p> <h2> <a href="system-customization.html#Fonts">Fonts</a>
</h2>
<a name="4"></a><p> Qtopia uses Helvetica as the default font, however, this font does not specify the characters for languages such as Chinese.
<p> The configuration file <tt>$QPEDIR/etc/default/FontMap.conf</tt> has to be translated so that the correct font family and size is used for each language. It defines the font which can be selected by users within Qtopia. If this configuration file is empty, Qtopia will use Helvetica font as the default font. Therefore, a valid <tt>FontMap.conf</tt> and <tt>QtopiaDefaults.ts</tt> file is required to suppress Helvetica as a selectable choice. The original <tt>FontMap.conf</tt> looks like this:
<p> <pre>
[Translation]
File=QtopiaDefaults
Context=FontMap
[Map]
Font0[]=small,helvetica,10
Font1[]=normal,helvetica,12
Font2[]=large,helvetica,14
</pre>
 
<p> Such a configuration will be suitable for most Western languages. The Map group defines three font settings that will be used by Qtopia, each of which have three parameters as follows:
<ol type=1>
<li> textual string that is presented to the user when a new setting is chosen
<li> font family specification 
<li> font size.
</ol>
<p> This configuration file is marked for translation. When executing <tt>make lupdate</tt> the build system will create:  <tt>$QPEDIR/i18n/your-lang/QtopiaDefaults.ts</tt>. Due to its special meaning, the string "small,helvetica,12" cannot be translated as a normal string, for example,  a French translation may look like this:
<p> <pre>
&lt;name&gt;FontMap&lt;/name&gt;
&lt;message encoding="UTF-8"&gt;
        &lt;source&gt;Small,helvetica,10&lt;/source&gt;
        &lt;translation&gt;Petit,unifont,11&lt;/translation&gt;
&lt;/message&gt;
</pre>
 
<p> As a result, <tt>Petit</tt> will be presented to the user and selecting this option will load the fontset <tt>unifont</tt> with a font size of 11. The chosen font has to support all characters of the given language.
<p> <h2> Program Internationalization
</h2>
<a name="5"></a><p> When <tt>make install</tt> is executed the build system generates Qt message files (<tt>.qm</tt> files).
<p> <h3> Placing Application Files
</h3>
<a name="5-1"></a><p> Application files must be placed as follows:
<p> <tt>/opt/Qtopia/i18n/language/appname.qm</tt>
<p> The <b>language</b> is an ISO 639 language code optionally followed by an underscore
and an ISO 3166 territory. For example, "en", "en_GB", "ja", "ja_JP".
The <b>appname</b> is the filename of the application executable.
<p> Note that you should not need to manually place files into /opt/Qtopia as "make install" supports installing .qm files.
<p> <h3> Placing Plug-in Files
</h3>
<a name="5-2"></a><p> For plug-ins that are shared libraries the files must be placed in
the following directory:
<p> <tt>/opt/Qtopia/i18n/language/pluginname.qm</tt>
<p> The <b>pluginname</b> is the filename of the plug-in shared object minus any extensions, but including "lib" if the plug-in incorporates that prefix.
<p> Locale suffixes are supported. For example, if your application uses British English it can have a <tt>/opt/Qtopia/i18n/en_US/appname.qm</tt> file specifying changes
for American English. Translations with locale suffixes take
precedence over translations without such suffixes.
<p> Note that you should not need to manually place files into /opt/Qtopia as "make install" supports installing .qm files.
<p> <h2> Desktop & Configuration File Internationalization
</h2>
<a name="6"></a><p> Desktop/Config files (eg. <tt>/opt/Qtopia/apps/Application/appname.desktop</tt>) can also be translated. For example, the <tt>texteditor.desktop</tt> file begins with:
<p> <pre>
[Translation]
File=QtopiaApplications
Context=Notes
[Desktop Entry]
Comment[]=A Text Editing Program
Exec=textedit
Icon=TextEditor
Type=Application
MimeType=text/*
Name[]=Notes
</pre>
 
<p> This causes the file <tt>/opt/Qtopia/i18n/language/QtopiaApplications.qm</tt> to be loaded (if it isn't already) and the strings marked with "[]" to be translated in the "Text Editor" context. Please read the <a href="buildsystem.html#non_code_translatables">build system</a> page for more information about non-code translatable files.
<p> These files are encoded in UTF-8.
<p> <h2> Image Translation
</h2>
<a name="7"></a><p> User interfaces can contain language specific images which may require translations (e.g. a text editor may use an image with a capital letter B indicating a bold font type). Since Qtopia 2.2 the resource system supports the translation of pcitures. Using the above example an application could load an internationalized "bold" image via:
<p> <tt>Resource::loadImage("app1/bold")</tt>;
<p> The resource system tries to find the picture for language e.g. <tt>en_GB</tt> using the following order:
<p> <ul>
<tt>QPEDIR/pics/app1/bold.png</tt> (app specific non-translatable pictures)
<tt>QPEDIR/pics/bold.png</tt> (global non-translatable pictures)
<tt>QPEDIR/pics/app1/i18n/en_GB/bold.png</tt> (app specific translatable pictures)
<tt>QPEDIR/pics/i18n/en_GB/bold.png</tt> (global non-translatable pictures)
<tt>QPEDIR/pics/app1/i18n/en/bold.png</tt>
<tt>QPEDIR/pics/i18n/en/bold.png</tt>
<tt>QPEDIR/pics/app1/i18n/en_US/bold.png</tt> (app specific fall back)
<tt>QPEDIR/pics/i18n/en_US/bold.png</tt> (global fallback)
</ul>
<p> A picture that requires a translation must be put into one of the i18n subfolders. American English (en_US) is used as a fall back mechanism in case there is no translation for the current language. Some pictures in e.g. Qtopia's pkim package use this mechanism. 
<p> Developers who wish to provide translations for their pictures have to ensure that they provide a translation for American English. Due to the lookup order of pictures the name must not exist in the application's picture directory nor in the global picture directory.
<p> <h2> Documentation Internationalization
</h2>
<a name="8"></a><p> Online documentation for applications is written in the HTML subset
supported by the Qt richtext widget.
Such documentation files must be placed as follows:
<p> English documentation:
<p> <tt>/opt/Qtopia/help/html/appname-suffixes.html</tt>
<p> Non-English documentation:
<p> <tt>/opt/Qtopia/help/language/html/appname-suffixes.html</tt>
<p> The <b>-suffixes</b> is optional. It always starts with "-" to avoid namespace conflicts.
<p> These files are encoded in UTF-8.
<p> For online help file information refer to: <a href="styleguide.html#HelpFile">Help File Contents</a>. 
<p> <h2> Other Internationalization Files
</h2>
<a name="9"></a><p> Other files that are language-specific are:
<p> <ul>
<li> <tt>/opt/Qtopia/etc/dict/&lt;lang&gt;/words</tt>
- list of words in <b>language</b>.
<li> <tt>/opt/Qtopia/etc/dict/&lt;lang&gt;/words.dawg</tt>
- above, converted to dawg format.
<li> <tt>/opt/Qtopia/etc/dict/&lt;lang&gt;common</tt>
- list of common words in <b>language</b> that input methods
might conflict with less common words.
<li> <tt>/opt/Qtopia/etc/dict/&lt;lang&gt;/common.dawg</tt>
- above, converted to dawg format.
</ul>
<p> <h2> Translating Your Own Applications
</h2>
<a name="10"></a><p> Qtopia's build system makes it very easy to translate your own applications. The example application in <tt>$QPEDIR/examples/application</tt> summarizes what has to be done in order to generate <tt>.ts</tt> files. Further details on how to build and install additional Qtopia applications can be found in the <a href="compile_run_examples.html">build system help</a>.
<p> 
<!-- eof -->
<p><address><hr><div align="center">
<table width="100%" cellspacing="0" border="0">
<tr>
<td>Copyright &copy; 2005 Trolltech
<td><a href="http://www.trolltech.com/trademarks.html">Trademarks</a>
<td align="right"><div align="right">Qtopia version 2.2.0</div>
</table></div></address></body>
</html>
