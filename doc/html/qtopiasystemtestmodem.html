<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>QtopiaSystemTestModem Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="modules-index.html"><font color="#004faf">Modules</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top"><img src="images/codeless.png" align="right" border="0" /></td></tr></table><h1 class="title">QtopiaSystemTestModem Class Reference<br /><span class="small-subtitle">[<a href="qtuitestmodule.html">QtUiTestModule</a>]</span>
</h1>
<p>The QtopiaSystemTestModem class provides functionality for simulating modem events from within a system test. <a href="#details">More...</a></p>
<pre>    #include &lt;QtopiaSystemTestModem&gt;</pre><p><b>This class is under development and is subject to change.</b></p>
<p>Inherits <a href="qobject.html">QObject</a>.</p>
<ul>
<li><a href="qtopiasystemtestmodem-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/>Boolean <b><a href="qtopiasystemtestmodem.html#activateWillFail">activateWillFail</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#destroy">destroy</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#expectCommand">expectCommand</a></b> ( String <i>key</i>, String <i>command</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#expectResponse">expectResponse</a></b> ( String <i>key</i>, String <i>response</i> )</li>
<li><div class="fn"/>String <b><a href="qtopiasystemtestmodem.html#getVariable">getVariable</a></b> ( String <i>name</i> ) const</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#hangupAll">hangupAll</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#hangupCall">hangupCall</a></b> ( Number <i>id</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#hangupConnected">hangupConnected</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#hangupConnectedAndHeld">hangupConnectedAndHeld</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#hangupHeld">hangupHeld</a></b> ()</li>
<li><div class="fn"/>Boolean <b><a href="qtopiasystemtestmodem.html#holdWillFail">holdWillFail</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#incomingSMS">incomingSMS</a></b> ( const Number <i>type</i>, String <i>sender</i>, String <i>serviceCenter</i>, String <i>text</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#installToolkitApp">installToolkitApp</a></b> ( SimApplication <i>app</i> )</li>
<li><div class="fn"/>Boolean <b><a href="qtopiasystemtestmodem.html#joinWillFail">joinWillFail</a></b> () const</li>
<li><div class="fn"/>Number <b><a href="qtopiasystemtestmodem.html#multipartyLimit">multipartyLimit</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#resetPersistentVariables">resetPersistentVariables</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#send">send</a></b> ( String <i>string</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#setActivateWillFail">setActivateWillFail</a></b> ( Boolean <i>value</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#setHoldWillFail">setHoldWillFail</a></b> ( Boolean <i>value</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#setJoinWillFail">setJoinWillFail</a></b> ( Boolean <i>value</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#setMultipartyLimit">setMultipartyLimit</a></b> ( Number <i>value</i> )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#setVariable">setVariable</a></b> ( String <i>name</i>, String <i>value</i>, Boolean <i>persistent</i> = false )</li>
<li><div class="fn"/>void <b><a href="qtopiasystemtestmodem.html#startIncomingCall">startIncomingCall</a></b> ( String <i>number</i> )</li>
<li><div class="fn"/>Boolean <b><a href="qtopiasystemtestmodem.html#waitCommand">waitCommand</a></b> ( String <i>key</i>, Number <i>timeout</i> = 10000 )</li>
<li><div class="fn"/>Boolean <b><a href="qtopiasystemtestmodem.html#waitResponse">waitResponse</a></b> ( String <i>key</i>, Number <i>timeout</i> = 10000 )</li>
</ul>
<ul>
<li><div class="fn"/>29 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"/>1 property inherited from <a href="qobject.html#properties">QObject</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
<li><div class="fn"/>1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
<li><div class="fn"/>1 public type inherited from <a href="qobject.html#public-variables">QObject</a></li>
<li><div class="fn"/>4 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"/>7 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"/>2 protected variables inherited from <a href="qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QtopiaSystemTestModem class provides functionality for simulating modem events from within a system test.</p>
<p>The QtopiaSystemTestModem class encapsulates a simulated AT modem. This allows phone events to be simulated, such as an incoming call or network handover.</p>
<p>Note that creating or destroying a QtopiaSystemTestModem causes Qt Extended to restart, as this is the only way to change the modem used by Qtopia.</p>
<p>An instance of this class can be obtained using the <a href="qtopiasystemtest.html#testModem">QtopiaSystemTest::testModem</a>() function. It is recommended to call this function in initTestCase to prevent Qt Extended restarting during a test.</p>
<p>See also <a href="qsystemtest.html">QSystemTest</a>.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="activateWillFail"></a><a href="qsystemtest.html#Boolean-typedef">Boolean</a> QtopiaSystemTestModem::activateWillFail () const</h3>
<p>Returns the activate request failure setting from the phone simulator.</p>
<p>Example:</p>
<pre><span class="comment">    // Retrieve the ACTIVATE failure status from the simulator</span>
    testModem().setActivateWillFail(true);
    QVERIFY( testModem().activateWillFail() );         <span class="comment">// returns 'true'</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#setActivateWillFail">setActivateWillFail</a>().</p>
<h3 class="fn"><a name="destroy"></a>void QtopiaSystemTestModem::destroy ()</h3>
<p>Deletes the test modem and restarts Qtopia.</p>
<h3 class="fn"><a name="expectCommand"></a>void QtopiaSystemTestModem::expectCommand ( <a href="qsystemtest.html#String-typedef">String</a> <i>key</i>, <a href="qsystemtest.html#String-typedef">String</a> <i>command</i> )</h3>
<p>Adds an expected AT command to the list. Set before the action prompting the command takes place. <i>key</i> is a reference to the command item, can be an arbitrary string. <i>command</i> is the expected command text.</p>
<p>Example:</p>
<pre><span class="comment">    // Test enabling Voice Call Waiting feature sends the correct AT command</span>
    testModem().expectCommand(&quot;enable_voice&quot;, &quot;AT+CCWA=1,1,1&quot;);
<span class="comment">    // Enable Voice CF checkbox</span>
    keyClick( Qt.Key_Select );
    QVERIFY( testModem().waitCommand(&quot;enable_voice&quot;, 5000) );</pre>
<p>See also <a href="qtopiasystemtestmodem.html#waitCommand">waitCommand</a>(), <a href="qtopiasystemtestmodem.html#expectResponse">expectResponse</a>(), and <a href="qtopiasystemtestmodem.html#waitResponse">waitResponse</a>().</p>
<h3 class="fn"><a name="expectResponse"></a>void QtopiaSystemTestModem::expectResponse ( <a href="qsystemtest.html#String-typedef">String</a> <i>key</i>, <a href="qsystemtest.html#String-typedef">String</a> <i>response</i> )</h3>
<p>Adds an expected AT response to the list. Set before the action prompting the response takes place. <i>key</i> is a reference to the response, can be an arbitrary string. <i>response</i> is the expected response text.</p>
<p>Example:</p>
<pre><span class="comment">    // Test enabling Voice Call Waiting receives the expected modem response</span>
    testModem().expectResponse(&quot;enable_voice&quot;, &quot;+CCWA=1,1&quot;);
<span class="comment">    // Enable Voice CF checkbox</span>
    keyClick( Qt.Key_Select );
    QVERIFY( testModem().waitResponse(&quot;enable_voice&quot;, 5000) );</pre>
<p>See also <a href="qtopiasystemtestmodem.html#waitResponse">waitResponse</a>(), <a href="qtopiasystemtestmodem.html#expectCommand">expectCommand</a>(), and <a href="qtopiasystemtestmodem.html#waitCommand">waitCommand</a>().</p>
<h3 class="fn"><a name="getVariable"></a><a href="qsystemtest.html#String-typedef">String</a> QtopiaSystemTestModem::getVariable ( <a href="qsystemtest.html#String-typedef">String</a> <i>name</i> ) const</h3>
<p>Returns the value of a specified phone simulator variable. <i>name</i> is the name of the variable to obtain the value from.</p>
<p>Example:</p>
<pre><span class="comment">    // Change operator name from within a system test, verify the result</span>
    testModem().setVariable(&quot;OP&quot;, &quot;Qt Extended Comms&quot;);
    var op = testModem().getVariable(&quot;OP&quot;);   <span class="comment">// Returns &quot;Qt Extended Comms&quot;</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#send">send</a>() and <a href="qtopiasystemtestmodem.html#setVariable">setVariable</a>().</p>
<h3 class="fn"><a name="hangupAll"></a>void QtopiaSystemTestModem::hangupAll ()</h3>
<p>Prompts the modem to 'remotely' end all calls, simulating a hang up event from all callers.</p>
<p>Example:</p>
<pre><span class="comment">    // Simulate a universal remote hangup event</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call</span>
    keyClick( Qt.Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call</span>
    keyClick( Qt.Key_Call );
    testModem().hangupAll();               <span class="comment">// All calls are ended</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#hangupConnected">hangupConnected</a>(), <a href="qtopiasystemtestmodem.html#hangupHeld">hangupHeld</a>(), <a href="qtopiasystemtestmodem.html#hangupConnectedAndHeld">hangupConnectedAndHeld</a>(), and <a href="qtopiasystemtestmodem.html#hangupCall">hangupCall</a>().</p>
<h3 class="fn"><a name="hangupCall"></a>void QtopiaSystemTestModem::hangupCall ( <a href="qsystemtest.html#Number-typedef">Number</a> <i>id</i> )</h3>
<p>Prompts the modem to 'remotely' end a specified call, simulating a hang up event from the specified caller. <i>id</i> is the 'call id' of the target call item, where activated calls in a call manager begin at '1' and are incremented on each activated call. Example:</p>
<pre><span class="comment">    // Simulate a remote hangup event from a specified caller</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call (Call 1)</span>
    keyClick( Qt.Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call (Call 2)</span>
    keyClick( Qt.Key_Call );
    testModem().hangupCall(1);             <span class="comment">// Call 1 is ended</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#hangupAll">hangupAll</a>(), <a href="qtopiasystemtestmodem.html#hangupConnected">hangupConnected</a>(), <a href="qtopiasystemtestmodem.html#hangupHeld">hangupHeld</a>(), and <a href="qtopiasystemtestmodem.html#hangupConnectedAndHeld">hangupConnectedAndHeld</a>().</p>
<h3 class="fn"><a name="hangupConnected"></a>void QtopiaSystemTestModem::hangupConnected ()</h3>
<p>Prompts the modem to 'remotely' end all active calls, simulating a hang up event from the active callers.</p>
<p>Example:</p>
<pre><span class="comment">    // Simulate an active calls remote hangup event</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call (call 1)</span>
    keyClick( Qt.Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call (call 2)</span>
    testModem().hangupConnected();         <span class="comment">// Only call 1 is ended</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#hangupAll">hangupAll</a>(), <a href="qtopiasystemtestmodem.html#hangupHeld">hangupHeld</a>(), <a href="qtopiasystemtestmodem.html#hangupConnectedAndHeld">hangupConnectedAndHeld</a>(), and <a href="qtopiasystemtestmodem.html#hangupCall">hangupCall</a>().</p>
<h3 class="fn"><a name="hangupConnectedAndHeld"></a>void QtopiaSystemTestModem::hangupConnectedAndHeld ()</h3>
<p>Prompts the modem to 'remotely' end all active and held calls, simulating a hang up event from all callers active and on hold.</p>
<p>Example:</p>
<pre><span class="comment">    // Simulate an active and held calls remote hangup event</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call (call 1)</span>
    keyClick( Qt.Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call (call 2)</span>
    keyClick( Qt.Key_Call );                <span class="comment">// Call 2 is active, Call 1 is placed on hold</span>
    testModem().startIncomingCall(54321);  <span class="comment">// Initiate an incoming call (call 3)</span>
    testModem().hangupConnectedAndHeld();  <span class="comment">// Calls 1 and 2 are ended, Call 3 is still waiting</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#hangupAll">hangupAll</a>(), <a href="qtopiasystemtestmodem.html#hangupConnected">hangupConnected</a>(), <a href="qtopiasystemtestmodem.html#hangupHeld">hangupHeld</a>(), and <a href="qtopiasystemtestmodem.html#hangupCall">hangupCall</a>().</p>
<h3 class="fn"><a name="hangupHeld"></a>void QtopiaSystemTestModem::hangupHeld ()</h3>
<p>Prompts the modem to 'remotely' end all held calls, simulating a hang up event from all callers on hold.</p>
<p>Example:</p>
<pre><span class="comment">    // Simulate a held calls remote hangup event</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call (call 1)</span>
    keyClick( Qt.Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call (call 2)</span>
    keyClick( Qt.Key_Call );                <span class="comment">// Call 2 is active, Call 1 is placed on hold</span>
    testModem().hangupHeld();              <span class="comment">// Call 1 is ended</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#hangupAll">hangupAll</a>(), <a href="qtopiasystemtestmodem.html#hangupConnected">hangupConnected</a>(), <a href="qtopiasystemtestmodem.html#hangupConnectedAndHeld">hangupConnectedAndHeld</a>(), and <a href="qtopiasystemtestmodem.html#hangupCall">hangupCall</a>().</p>
<h3 class="fn"><a name="holdWillFail"></a><a href="qsystemtest.html#Boolean-typedef">Boolean</a> QtopiaSystemTestModem::holdWillFail () const</h3>
<p>Returns the hold request failure setting from the phone simulator.</p>
<p>Example:</p>
<pre><span class="comment">    // Retrieve the HOLD failure status from the simulator</span>
    testModem().setHoldWillFail(true);
    QVERIFY( testModem().holdWillFail() );</pre>
<p>See also <a href="qtopiasystemtestmodem.html#setHoldWillFail">setHoldWillFail</a>().</p>
<h3 class="fn"><a name="incomingSMS"></a>void QtopiaSystemTestModem::incomingSMS ( const <a href="qsystemtest.html#Number-typedef">Number</a> <i>type</i>, <a href="qsystemtest.html#String-typedef">String</a> <i>sender</i>, <a href="qsystemtest.html#String-typedef">String</a> <i>serviceCenter</i>, <a href="qsystemtest.html#String-typedef">String</a> <i>text</i> )</h3>
<p>Initiates an incoming short message. <i>type</i> indicates the message class (0 - 3) <i>sender</i> is the phone number of the sending party <i>serviceCenter</i> is the SMS forwarding service <i>text</i> is the short message text.</p>
<p>Example:</p>
<pre><span class="comment">    // Initiate an incoming SMS</span>
    expectMessageBox( &quot;New Message&quot;, &quot;Do you wish to view&quot;, &quot;Yes&quot;, 5000 ){
        testModem().incomingSMS( &quot;12345&quot;, &quot;67090&quot;, &quot;Hello&quot; );
    }</pre>
<h3 class="fn"><a name="installToolkitApp"></a>void QtopiaSystemTestModem::installToolkitApp ( SimApplication <i>app</i> )</h3>
<p>Installs <i>app</i> as the SIM toolkit application in the simulated modem. If <i>app</i> is null, return to the default SIM toolkit application.</p>
<p>The previous SIM toolkit application will be deleted if it is not the default.</p>
<h3 class="fn"><a name="joinWillFail"></a><a href="qsystemtest.html#Boolean-typedef">Boolean</a> QtopiaSystemTestModem::joinWillFail () const</h3>
<p>Returns the join request failure setting from the phone simulator.</p>
<p>Example:</p>
<pre><span class="comment">    // Retrieve the JOIN failure status from the simulator</span>
    testModem().setJoinWillFail(true);
    QVERIFY( testModem().joinWillFail() );             <span class="comment">// returns 'true'</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#setJoinWillFail">setJoinWillFail</a>().</p>
<h3 class="fn"><a name="multipartyLimit"></a><a href="qsystemtest.html#Number-typedef">Number</a> QtopiaSystemTestModem::multipartyLimit () const</h3>
<p>Returns the maximum number of concurrent parties currently allowed in the test modem.</p>
<p>Example:</p>
<pre><span class="comment">    // Retrieve the maximum number of allowed participants in a multiparty call</span>
    testModem().setMultipartyLimit(5);
    var lim = testModem().multipartyLimit();         <span class="comment">// returns 5</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#setMultipartyLimit">setMultipartyLimit</a>().</p>
<h3 class="fn"><a name="resetPersistentVariables"></a>void QtopiaSystemTestModem::resetPersistentVariables ()</h3>
<p>Forget all persistent values set through <a href="qtopiasystemtestmodem.html#setVariable">setVariable</a>(). The next time Qt Extended is restarted, all variables which were previously persistent will be set to their default values.</p>
<h3 class="fn"><a name="send"></a>void QtopiaSystemTestModem::send ( <a href="qsystemtest.html#String-typedef">String</a> <i>string</i> )</h3>
<p>Make the simulated modem emit arbitrary unsolicited data. <i>string</i> is the string emitted by the modem.</p>
<p>Example:</p>
<pre><span class="comment">    // Change operator name from within a system test</span>
    testModem().setVariable(&quot;OP&quot;, &quot;Qt Extended Comms&quot;);
    testModem().send(&quot;+CREG: 5&quot;);</pre>
<h3 class="fn"><a name="setActivateWillFail"></a>void QtopiaSystemTestModem::setActivateWillFail ( <a href="qsystemtest.html#Boolean-typedef">Boolean</a> <i>value</i> )</h3>
<p>Enables a simulated failure response on ACTIVATE requests eg. alternate between an active and held call. <i>value</i> is the desired setting.</p>
<p>Example:</p>
<pre><span class="comment">    // Simulate a failed ACTIVATE request within a system test</span>
    testModem().setActivateWillFail(true); <span class="comment">// Activate failures enabled</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call</span>
    keyClick( Qt.Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call</span>
    keyClick( Qt.Key_Call ) );
    selectContext( &quot;Swap&quot; );       <span class="comment">// Request ACTIVATE on held call, modem will respond with &quot;ERROR&quot;</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#activateWillFail">activateWillFail</a>().</p>
<h3 class="fn"><a name="setHoldWillFail"></a>void QtopiaSystemTestModem::setHoldWillFail ( <a href="qsystemtest.html#Boolean-typedef">Boolean</a> <i>value</i> )</h3>
<p>Enables a simulated failure response on HOLD requests. <i>value</i> is the desired setting.</p>
<p>Example:</p>
<pre><span class="comment">    // Simulate a failed HOLD request within a system test</span>
    testModem().setHoldWillFail(true);     <span class="comment">// Hold failures enabled</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call</span>
    keyClick( Qt.Key_Call );
    selectContext(&quot;Hold&quot;);                  <span class="comment">// Modem will respond with &quot;ERROR&quot;</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#holdWillFail">holdWillFail</a>().</p>
<h3 class="fn"><a name="setJoinWillFail"></a>void QtopiaSystemTestModem::setJoinWillFail ( <a href="qsystemtest.html#Boolean-typedef">Boolean</a> <i>value</i> )</h3>
<p>Enables a simulated failure response on JOIN requests ie. creating a multiparty call. <i>value</i> is the desired setting.</p>
<p>Example:</p>
<pre><span class="comment">    // Simulate a failed JOIN request within a system test</span>
    testModem().setJoinWillFail(true);     <span class="comment">// Join failures enabled</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call</span>
    keyClick( Qt::Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call</span>
    keyClick( Qt::Key_Call );
    selectContext( &quot;Join&quot; );       <span class="comment">// Request JOIN on calls, modem will respond with &quot;ERROR&quot;</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#joinWillFail">joinWillFail</a>().</p>
<h3 class="fn"><a name="setMultipartyLimit"></a>void QtopiaSystemTestModem::setMultipartyLimit ( <a href="qsystemtest.html#Number-typedef">Number</a> <i>value</i> )</h3>
<p>Sets the maximum number of concurrent parties in the test modem. <i>value</i> is the target maximum number of parties.</p>
<p>Example:</p>
<pre><span class="comment">    // Sets the maximum number of participants in a multiparty call</span>
    testModem().setMultipartyLimit(2);     <span class="comment">// Set maximum participants to '2'</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call (Call 1)</span>
    keyClick( Qt.Key_Call );
    testModem().startIncomingCall(67890);  <span class="comment">// Initiate an second incoming call (Call 2)</span>
    keyClick( Qt.Key_Call );
    selectContext( &quot;Join&quot; );
    testModem().startIncomingCall(54321);  <span class="comment">// Initiate an incoming call (Call 3)</span>
    keyClick( Qt.Key_Call );
    selectContext( &quot;Join&quot; );                  <span class="comment">// Maximum participants reached, join will fail</span></pre>
<p>See also <a href="qtopiasystemtestmodem.html#multipartyLimit">multipartyLimit</a>().</p>
<h3 class="fn"><a name="setVariable"></a>void QtopiaSystemTestModem::setVariable ( <a href="qsystemtest.html#String-typedef">String</a> <i>name</i>, <a href="qsystemtest.html#String-typedef">String</a> <i>value</i>, <a href="qsystemtest.html#Boolean-typedef">Boolean</a> <i>persistent</i> = false )</h3>
<p>Change the value of a specified phone simulator variable. <i>name</i> is the name of the variable to change, <i>value</i> is the new value of the variable. If <i>persistent</i> is true, the value of the variable will be retained when Qt Extended is restarted. Otherwise the variable will be reset to its default value.</p>
<p>Example:</p>
<pre><span class="comment">    // Change operator name from within a system test</span>
    testModem().setVariable(&quot;OP&quot;, &quot;Qt Extended Comms&quot;);
    testModem().send(&quot;+CREG: 5&quot;);</pre>
<p>See also <a href="qtopiasystemtestmodem.html#send">send</a>() and <a href="qtopiasystemtestmodem.html#getVariable">getVariable</a>().</p>
<h3 class="fn"><a name="startIncomingCall"></a>void QtopiaSystemTestModem::startIncomingCall ( <a href="qsystemtest.html#String-typedef">String</a> <i>number</i> )</h3>
<p>Initiates an incoming call. <i>number</i> is the phone number of the calling party (can be empty).</p>
<p>Example:</p>
<pre><span class="comment">    // Initiate an incoming call</span>
    testModem().startIncomingCall(12345);  <span class="comment">// Initiate an incoming call (Call 1)</span>
    keyClick( Qt.Key_Call );   <span class="comment">// Call 1 now active</span></pre>
<h3 class="fn"><a name="waitCommand"></a><a href="qsystemtest.html#Boolean-typedef">Boolean</a> QtopiaSystemTestModem::waitCommand ( <a href="qsystemtest.html#String-typedef">String</a> <i>key</i>, <a href="qsystemtest.html#Number-typedef">Number</a> <i>timeout</i> = 10000 )</h3>
<p>Verifies an expected command has been sent. Will fail if not set with expectedCommand(). <i>key</i> is a reference to the command item as set in <a href="qtopiasystemtestmodem.html#expectCommand">expectCommand</a>(). <i>timeout</i> indicates time to verification failure.</p>
<p>Returns true if the specified command occurs within the given timeout.</p>
<p>Example:</p>
<pre><span class="comment">    // Test enabling Voice Call Waiting feature sends the correct AT command</span>
    testModem().expectCommand(&quot;enable_voice&quot;, &quot;AT+CCWA=1,1,1&quot;);
<span class="comment">    // Enable Voice CF checkbox</span>
    keyClick( Qt.Key_Select );
    QVERIFY( testModem().waitCommand(&quot;enable_voice&quot;, 5000) );</pre>
<p>See also <a href="qtopiasystemtestmodem.html#expectCommand">expectCommand</a>(), <a href="qtopiasystemtestmodem.html#expectResponse">expectResponse</a>(), and <a href="qtopiasystemtestmodem.html#waitResponse">waitResponse</a>().</p>
<h3 class="fn"><a name="waitResponse"></a><a href="qsystemtest.html#Boolean-typedef">Boolean</a> QtopiaSystemTestModem::waitResponse ( <a href="qsystemtest.html#String-typedef">String</a> <i>key</i>, <a href="qsystemtest.html#Number-typedef">Number</a> <i>timeout</i> = 10000 )</h3>
<p>Verifies an expected response has been received. Will fail if not set with expectedResponse(). <i>key</i> is a reference to the response item as set in <a href="qtopiasystemtestmodem.html#expectResponse">expectResponse</a>(). <i>timeout</i> indicates time to verification failure.</p>
<p>Returns true if the specified response is received within the given timeout.</p>
<p>Example:</p>
<pre><span class="comment">    // Test enabling Voice Call Waiting feature prompts the correct AT response</span>
    testModem().expectResponse(&quot;enable_voice&quot;, &quot;+CCWA=1,1&quot;);
<span class="comment">    // Enable Voice CF checkbox</span>
    keyClick( Qt.Key_Select );
    QVERIFY( testModem().waitResponse(&quot;enable_voice&quot;, 5000) );</pre>
<p>See also <a href="qtopiasystemtestmodem.html#expectResponse">expectResponse</a>(), <a href="qtopiasystemtestmodem.html#expectCommand">expectCommand</a>(), and <a href="qtopiasystemtestmodem.html#waitCommand">waitCommand</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2008 Trolltech</td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Extended 4.4.1</div></td>
</tr></table></div></address></body>
</html>
