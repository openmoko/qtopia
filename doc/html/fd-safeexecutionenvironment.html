<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Content: Installed Software: Safe Execution Environment</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></td></tr></table><h1 class="title">Content: Installed Software: Safe Execution Environment<br><small>Functional Description</small></h1><p>The Safe Execution Environment provides a level of security to enable 
downloading, installing and running third-party native applications; by 
addressing the risk of compromising the operation of the device, or its data, 
when running such applications. <p/> 
<strong>The Safe Execution Environment for Qtopia 4.3 Final only supports the 
download and secure execution of games</strong> <p />

<h2>Features</h2>
<ul><li><a href="#QTOPIA-1598">Game Download</a>
<li><a href="#QTOPIA-1595">Safe Execution Package Manager</a>
<li><a href="#QTOPIA-1594">Safe Execution Policy Implementation</a>
<li><a href="#QTOPIA-1596">Sample Integration</a>
<li><a href="#QTOPIA-1599">Sand-boxing</a>
<li><a href="#QTOPIA-1601">Security Monitor</a>
<li><a href="#QTOPIA-7752">Two tier domain model</a>
</ul><h3><a name=QTOPIA-1598>Game Download (QTOPIA-1598)</a></h3>
<p>End-users may safely download and run <b>games</b>.  Here <em>games</em> refers to restricted applications which do not require access to the full range of Qtopia features (such as networking and document access).

<p>These applications are restricted to</p>
<ul>
	<li>write-only display access</li>
	<li>a specific location on the file-system</li>
	<li>play audio</li>
</ul>

<h3><a name=QTOPIA-1595>Safe Execution Package Manager (QTOPIA-1595)</a></h3>
<p>Refer to the <span class="nobr"><a href="fd-PackageManager.html">Package Manager<sup></sup></a></span> spec for details of the SXE related features of the Package Manager.
<h3><a name=QTOPIA-1594>Safe Execution Policy Implementation (QTOPIA-1594)</a></h3>
<p><h4><a name="ApplicationLevelPolicy"></a>Application Level Policy</h4>

<p>A policy file can be used to regulate the communication between applications and the server that take place along Qtopia IPC.  The policy file consists of a set of domains, each of which consists of a set of request strings.  There are currently 2 domains, untrusted and trusted.</p>

<p>Through application policy,  requests can be allowed for applications in the trusted domain while denied for those in the untrusted domain.</p>

<h4><a name="OSLevelPolicy"></a>OS Level Policy</h4>

<p>Application level policy is supplemented by Operating System level policy provided by a number of scripts.  These scripts are used specify the policy of a Mandatory Access Control implementation ( such as LIDS from <span class="nobr"><a href="http://www.lids.org">http://www.lids.org<sup></sup></a></span>).  Mandatory Access Control can, for example, prevent a program accessing the network or modem device directly.</p>
<h3><a name=QTOPIA-1596>Sample Integration (QTOPIA-1596)</a></h3>
<p>An example integration of MAC rules, SXE file-system and Qtopia is provided as part of the Greenphone image. Scripts to build modified versions of the kernel, and the image are available. Generic script templates are also provided so that system customization can be performed for other platforms. 
<h3><a name=QTOPIA-1599>Sand-boxing (QTOPIA-1599)</a></h3>
<p>Untrusted applications run under a sandbox MAC rule set which inverts the usual system of <em>allow, unless specifically denied</em> to instead be <em>deny, unless specifically allowed</em>.  This ensures that downloaded applications are not able to access any exploitable system resources.

<p>The sandbox restricts the application to a specific subset of the file-system for its read-write access.  </p>

<p>This feature includes a complete integration of the the SANDBOX rule into the 2.4 kernel based file-system on the Greenphone.  It also caters for read-only filesystems such as cramfs.</p>

<p>The sandbox implementation is provided as a set of kernel patches and file-system tools, which builders of an SXE Qtopia device must apply during integration.</p>
<h3><a name=QTOPIA-1601>Security Monitor (QTOPIA-1601)</a></h3>
<p>SxeMonitor is a Qtopia system process, which monitors breaches in SXE policy.  The following action is taken upon detection of a policy breach:
<ul>
	<li>Alert dialog on application attempting unauthorized action</li>
	<li>Alert SMS on application attempting unauthorized action</li>
	<li>Downloaded application prevented from relaunching, ie disabled, after attempting unauthorized action.  (Application can be re-enabled using Package Manager)</li>
	<li>All running instances of the downloaded application are terminated when attempting an unauthorized action.</li>
	<li>All downloaded applications are terminated and disabled if a brute force attack on binary keys is detected.</li>
</ul>

<h3><a name=QTOPIA-7752>Two tier domain model (QTOPIA-7752)</a></h3>
<p><font color=red>NOT YET RELEASED</font></p><p><h2><a name="Rationale"></a>Rationale</h2>
<p>As of 4.3.0, the current implementation of SXE has approximately 60 domains to choose from.  Such a large number makes it difficult for a developer to choose what domains are needed.  The difficulty for the developer is compounded by the fact that it is not easy to precisely determine what capabilities each domain gives.  Another problem is the fact that SXE's authorization implementation makes it difficult to introduce new service provider applications without having to modify policy files.</p>

<p>To simplify this state of affairs, it has been proposed that there be only 2 domains trusted and untrusted.  For 4.3.1, we have promised to deliver a solution for the secure running of games.  All games would therefore run under the untrusted domain with would allow the following capabilities:</p>
<ul>
	<li>play audio</li>
	<li>write settings files</li>
	<li>draw into application area</li>
	<li>change the context bar</li>
	<li>write access to sandboxed directory</li>
</ul>


<p>All applications in the trusted domain would be unrestricted. </p>

<h2><a name="TaskSummary"></a>Task Summary</h2>
<h3><a name="SetupTrustedDomain"></a>Set up Trusted Domain</h3>
<p>A trusted domain needs to be created and all Qtopia system applications need to declare this domain.  Any scripts which setup the "default" set of rules for the filesystem should no longer be run and eventually removed.</p>

<h3><a name="SetupUntrusteddomain"></a>Set up Untrusted domain</h3>
<p>An untrusted domain needs to be created and should only give the capabilities listed above.  Qtopia games such as<br/>
qasteroids, minesweep etc need to declare the untrusted domain.</p>



<hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2008 <a href="trolltech.html">Trolltech</a></td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qtopia 4.3.2</div></td>
</tr></table></div>