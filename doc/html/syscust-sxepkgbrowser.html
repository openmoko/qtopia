<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>PackageManager - Browser Integration</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></td></tr></table><h1 align="center">PackageManager - Browser Integration<br /><span class="subtitle"></span>
</h1>
<p>This document describes the <tt>PackageManager</tt> service web- browser integration, and how a Qtopia package can be made available via a web-page.</p>
<ul><li><a href="#packagemanager-service-web-browser-integration">PackageManager Service Web Browser Integration</a></li>
<li><a href="#how-to-make-a-qtopia-package-available-via-a-web-page">How to Make a Qtopia Package Available via a Web Page</a></li>
<ul><li><a href="#qtopia-package-descriptor-and-web-page-configuration">Qtopia Package Descriptor and Web Page Configuration</a></li>
<li><a href="#web-server-configuration">Web Server Configuration</a></li>
</ul>
</ul>
<a name="packagemanager-service-web-browser-integration"></a>
<h2>PackageManager Service Web Browser Integration</h2>
<p>The normal process for a user wanting to install a package is a sequence of steps such as:</p>
<ol type="1">
<li>Invoke the <tt>PackageManager</tt></li>
<li><tt>PackageManager</tt> connects to the web server and displays the list of packages offered</li>
<li>the user selects the required package and installs it.</li>
</ol>
<p>While this approach works well, it binds a user to the pre-configured web server offered by the provider. The browser integration enables the user to visit any web site and install packages from there.</p>
<p>The process is simplified to:</p>
<ol type="1">
<li>A web page offers a list of links to Qtopia package file <a href="sxe-pkgmgr-ctlfile.html#qpd-descriptor">descriptors</a> which are text files containing information about a package as well as an exact URL indicating the download location.</li>
<li>The user clicks the required link and the descriptor is downloaded and passed to the <tt>PackageManager</tt>.</li>
<li>The user reads the package requirements.</li>
<li>The user clicks the install button and the package is downloaded and installed.</li>
</ol>
<p>This package behaves like any other package, that is, it can be un-installed and is subject to SXE security.</p>
<a name="how-to-make-a-qtopia-package-available-via-a-web-page"></a>
<h2>How to Make a Qtopia Package Available via a Web Page</h2>
<p>To make a Qtopia packages available via a web page a Qtopia package descriptor file needs to be provided for each package. A minor change of the web server configuration with regard to the mime types is required and is described <a href="#webconfig">below</a>.</p>
<a name="qtopia-package-descriptor-and-web-page-configuration"></a>
<h3>Qtopia Package Descriptor and Web Page Configuration</h3>
<p>For every package offered for download a Qtopia package descriptor file must be provided. This file has the extension <a href="sxe-pkgmgr-ctlfile.html#qpd-descriptor"><tt>.qpd</tt></a> and contains the same information about the single package as is found in the <a href="sxe-pkgmgr-ctlfile.html#packages-list"><tt>packages.list</tt></a> file, together with a URL indicating the package download location.</p>
<p>The link on the web page points to the descriptor file and is processed by the <tt>PackageManager</tt> which extracts the URL and, upon confirmation by the user, downloads and installs the package.</p>
<p>If support for different architectures is required, for example, <tt>ARM</tt> or <tt>i386</tt> a package and descriptor needs to be created for each supported architecture. The <tt>PackageManager</tt> will not download and install a package if it does not match the architecture of the device on which it is to run.</p>
<a name="webconfig"></a><a name="web-server-configuration"></a>
<h3>Web Server Configuration</h3>
<p>For the browser to detect the Qtopia package descriptor the web server must set the appropriate mime type (<tt>application/qtopia-package</tt>) in the HTTP header for that file. This means that on the web server a new mime type mapping must be configured for the extension of the Qtopia package descriptor, which is <tt>*.qpd</tt>.</p>
<p>The following table describes the mime type mapping for two common browsers:</p>
<p><table align="center" cellpadding="2" cellspacing="1" border="0">
<thead><tr valign="top" class="qt-style"><th>Browser</th><th>Mapping Instructions</th></tr></thead>
<tr valign="top" class="odd"><td>Apache 2</td><td>Edit the <tt>mime.types</tt> file, usually found under <tt>/etc/apache2</tt> Append a line containing:<pre>    application/qtopia-package qpd</pre>
</td></tr>
<tr valign="top" class="even"><td>IIS</td><td><ul>
<li>Add mime entries to the following registry location: <tt>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\InetInfo\Parameters\MimeMap</tt> by opening the <tt>MimeMap</tt> key and choosing <tt>Edit Value</tt> or <tt>Add Value</tt>.</li>
<li>The mime information must be placed in the <tt>Value Name</tt> box.</li>
<li>The data type for the entry must be set to <tt>REG_SZ</tt> and the string field is left blank.</li>
</ul>
</td></tr>
</table></p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2008 <a href="trolltech.html">Trolltech</a></td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qtopia 4.3.2</div></td>
</tr></table></div></address></body>
</html>
