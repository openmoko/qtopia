<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- /home/ianw/dev/packages/qtopia/1.6/tmp12684/qtopia/doc/services.doc:1 -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css"><!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
body { background: #ffffff; color: black; }
--></style>
</head>
<body>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr bgcolor="black"><td>
<a href="classes.html"><font color="white">Qt API</font></a>
<font color="white">|</font>
<a href="qtopiaemb.html"> <font color="white">Qtopia API</font></a>
</td>
<td align="right"><a href="../index.html"><font color="white"><i>Qtopia Documentation</i></font></a></td>
<td align="right" valign="center"><img src="logo32.png" align="right" width="64" height="32" border="0"></td></tr></table>
<p> 
<p> <h2> Qtopia - Application Services
</h2>
<a name="1"></a><p> Application Services are standardized APIs to functionality
supplied by applications. The purpose is to allow applications
to invoke the services of other applications, yet allow the end-user
to decide which application provides each service.
<p> Trolltech defines the following <a href="servicesapi.html">services</a>.
<p> <h3> Qtopia - Requesting Services
</h3>
<a name="1-1"></a><p> To request a service, the calling application executes:
<p> <pre>
    <a href="servicerequest.html">ServiceRequest</a> srv(servicename, action);
    srv &lt;&lt; parameters;
    srv.<a href="servicerequest.html#send">send</a>();
</pre>
 
<p> For example:
<p> <pre>
    <a href="servicerequest.html">ServiceRequest</a> srv("Email", "writeMail(QString,QString)");
    srv &lt;&lt; QString("Johan R. User") &lt;&lt; QString("random@trolltech.com");
    srv.<a href="servicerequest.html#send">send</a>();
</pre>
 
<p> <a href="servicerequest.html#send">ServiceRequest::send</a>() returns a bool value indicating whether the
service is available.
<p> <h3> Qtopia - Responding to <a href="service.html">Service</a> Requests
</h3>
<a name="1-2"></a><p> To respond to a service request, an application should connect to the
<a href="qpeapplication.html#appMessage">QPEApplication::appMessage</a>() signal.
<p> Applications register as providing a service by supplying a
$QPEDIR/services/<i>servicename</i>/<i>appname</i> file, where
<i>servicename</i> is both the directory name and the name of the service and
<i>appname</i> is the application's executable filename.
This file is a standard Qtopia <a href="config.html">Config</a> file. The keys in this file are:
<p> <ul>
<li> <tt>[Standard]</tt>
<ul>
<li> <tt>Version</tt>
<p>
An integer. "100" should be interpretted as Version 1.00.
Later versions of a service may support additional actions.
</ul>
<li> <tt>[Extensions]</tt>
<ul>
<li> <tt>Actions</tt>
<p>
Additional actions to those defined by the basic (standard) service.
</ul>
<li> <tt>[</tt><i>action</i><tt>]</tt>
<p>
For each entry in the Actions list above, there is
a group defining properties of the action.
<ul>
<li> <tt>Name</tt>
<li> <tt>Icon</tt>
</ul>
</ul>
<p> <h3> Qtopia - Adding a New <a href="service.html">Service</a>
</h3>
<a name="1-3"></a><p> Each service must be very carefully specified since it provides a system
wide API that can be invoked by other applications and the user.  A
service should only be added if it:
<ul>
<li> provides new functionality not already provided by a
<a href="servicesapi.html">pre-defined service</a>.
<li> is useful to other applications.
<li> is well-defined within the scope of the application type, e.g.
<b>openURL(<a href="qstring.html">QString</a> <i>url</i>)</b> for a web browser.
<li> avoids adding unnecessary functionality which could complicate the
user interface.
</ul>
<p> To add a new service provide a $QPEDIR/services/<i>servicename</i>.service
file, which is a standard Qtopia <a href="config.html">Config</a> file. The keys in this file are:
<p> <ul>
<li> <tt>[Service]</tt>
<ul>
<li> <tt>Name</tt>
<li> <tt>Icon</tt>
<li> <tt>Actions</tt>
<p>
This is a list of actions separated by semicolon (;). The actions
include any formal parameters in parantheses, including the case
of no parameters.
</ul>
<li> <tt>[</tt><i>action</i><tt>]</tt>
<p>
For each entry in the Actions list above, there is
a group defining properties of the action.
<p> An action with no parameters will appear in the list of available actions
in the button settings.  There is no need to add this section if
the action will not be shown to the user, i.e. has parameters.
<ul>
<li> <tt>Name</tt>
<li> <tt>Icon</tt>
</ul>
</ul>
<p> Example:
<p> <pre>
[Service]
Icon = DateBook
Name = <a href="calendar.html">Calendar</a>
Name[de] = Termin kalender
Name[hu] = Napt√°r
Name[no] = Avtalebok
Actions=raiseToday()
[raiseToday()]
Name=Show today's events
Icon=today
</pre><p> Usually, only one application responds to a given service. The user selects
which application handles the service using the Application
Services settings. If however, the service can be provided by multiple
applications, the service file will contain:
<p> <pre>
Multiple = 1
</pre><p> in the <tt>[Service]</tt> section.
<p> 
<!-- eof -->
<p><address><hr><div align=center>
<table width=100% cellspacing=0 border=0><tr>
<td>Copyright &copy; 2001-2002 Trolltech<td><a href="http://www.trolltech.com/trademarks.html">Trademarks</a>
<td align=right><div align=right>Qtopia version 1.6.1</div>
</table></div></address></body>
</html>
