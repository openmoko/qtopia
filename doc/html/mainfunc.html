<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- /home/period/dev/qtopia/1/tmp31069/qtopia/doc/mainwidget.doc:1 -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css"><!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
body { background: #ffffff; color: black; }
--></style>
</head>
<body>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr bgcolor="black"><td>
<a href="classes.html"><font color="white">Qt API</font></a>
<font color="white">|</font>
<a href="qtopiaemb.html"> <font color="white">Qtopia API</font></a>
</td>
<td align="right"><a href="../index.html"><font color="white"><i>Qtopia Documentation</i></font></a></td>
<td align="right" valign="center"><img src="logo32.png" align="right" width="64" height="32" border="0"></td></tr></table>
<p> 
<p> <h2> Qtopia - The main() function
</h2>
<a name="1"></a><p> Starting with Qtopia 1.7, it is no longer recommended that the main()
function be written explicitly by the programmer.  Instead two macros
are provided to declare the application entry point:
<p> <pre>
QTOPIA_ADD_APPLICATION(NAME,IMPLEMENTATION)
QTOPIA_MAIN
</pre>
 
<p> QTOPIA_ADD_APPLICATION() generates code to instantiate the main window,
where NAME is the application executable name and IMPLEMENTATION is the
application window class.
<p> QTOPIA_MAIN is either the main() implementation or the interface code
necessary to make the application a  quicklauncher plugin (if
QTOPIA_APP_INTERFACE is defined - see below).
<p> The main.cpp of all applications should be modeled on
this example:
<p> <pre>
#include "mymainwindow.h"
#include &lt;qtopia/qpeapplication.h&gt;

QTOPIA_ADD_APPLICATION("myapp", MyMainWindow)
QTOPIA_MAIN
</pre>
 
<p> The application window should be implemented in a self-contained way:
it should not perform application-level operations such as testing
parameters, calling exit(), or calling quit(); all of these are
handled by <a href="qpeapplication.html">QPEApplication</a>. Your application window should call close()
if it needs to explicitly close, and it must be prepared for the
possibility that show() will be called again after the close() but
before the application window destructor. In other words, implement
your application window in a way that it could be used easily from
other applications. If you take this approach it will also mean that
most of your program can be trivially reused on <a href="qt.html">Qt</a>/X11, Qt/Windows,
Qt/Mac, and any other ports of the Qt API.
<p> <h3> Enabling Quicklaunching
</h3>
<a name="1-1"></a><p> Starting with Qtopia 1.7, applications can be built as plugins that
can be loaded by the  quicklaucher.
The quicklauncher is a stub application that is
pre-loaded and can load an application plugin and change personality to
the plugin application.  The benefit of loading Qtopia applications in this
way is that much of the functionality that the application needs is pre-loaded
and pre-initialised, so the application loading time is significantly
reduced.  Quicklauncher-enabled applications can be run on older Qtopia
platforms by first installing the quicklauncher package.
<p> In order to build an application as a quicklauncher application plugin,
main.cpp must be implemented as above.  Then modify the
tmake project file to build the application as a library and compile
with the plugin interface code enabled by defining QTOPIA_APP_INTERFACE),
for example:
<p> <pre>
TEMPLATE = lib
CONFIG  += qtopia
DEFINES += QTOPIA_APP_INTERFACE
HEADERS  = mymainwindow.h
SOURCES  = mymainwindow.cpp main.cpp
TARGET   = myapp
</pre>
 
<p> Application plugins must be installed in QPEDIR/plugins/application/.
<p> 
<!-- eof -->
<p><address><hr><div align=center>
<table width=100% cellspacing=0 border=0><tr>
<td>Copyright &copy; 2001-2002 Trolltech<td><a href="http://www.trolltech.com/trademarks.html">Trademarks</a>
<td align=right><div align=right>Qtopia version 1.7.0</div>
</table></div></address></body>
</html>
