<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>QObexPushService Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></td></tr></table><h1 align="center">QObexPushService Class Reference</h1>
<p>The QObexPushService class encapsulates an OBEX Push service. <a href="#details">More...</a></p>
<pre>    #include &lt;QObexPushService&gt;</pre><p>Inherits <a href="qobject.html">QObject</a>.</p>
<ul>
<li><a href="qobexpushservice-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-types"></a>
<h3>Public Types</h3>
<ul>
<li><div class="fn"/>enum <b><a href="qobexpushservice.html#Error-enum">Error</a></b> { NoError, LinkError, Aborted, UnknownError }</li>
<li><div class="fn"/>enum <b><a href="qobexpushservice.html#State-enum">State</a></b> { Ready, Connecting, Disconnecting, Streaming, Closed }</li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/><b><a href="qobexpushservice.html#QObexPushService">QObexPushService</a></b> ( QObexSocket * <i>socket</i>, QObject * <i>parent</i> = 0 )</li>
<li><div class="fn"/><b><a href="qobexpushservice.html#dtor.QObexPushService">~QObexPushService</a></b> ()</li>
<li><div class="fn"/>virtual QByteArray <b><a href="qobexpushservice.html#businessCard">businessCard</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#close">close</a></b> ()</li>
<li><div class="fn"/>Error <b><a href="qobexpushservice.html#error">error</a></b> () const</li>
<li><div class="fn"/>const QString &amp; <b><a href="qobexpushservice.html#incomingDirectory">incomingDirectory</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#setIncomingDirectory">setIncomingDirectory</a></b> ( const QString &amp; <i>dir</i> )</li>
<li><div class="fn"/>QObexSocket * <b><a href="qobexpushservice.html#socket">socket</a></b> ()</li>
<li><div class="fn"/>State <b><a href="qobexpushservice.html#state">state</a></b> () const</li>
</ul>
<ul>
<li><div class="fn"/>37 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
</ul>
<a name="signals"></a>
<h3>Signals</h3>
<ul>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#done">done</a></b> ( bool <i>error</i> )</li>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#getRequest">getRequest</a></b> ( const QString &amp; <i>filename</i>, const QString &amp; <i>mimetype</i> )</li>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#progress">progress</a></b> ( qint64 <i>completed</i>, qint64 <i>total</i> )</li>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#putRequest">putRequest</a></b> ( const QString &amp; <i>filename</i>, const QString &amp; <i>mimetype</i> )</li>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#requestComplete">requestComplete</a></b> ( bool <i>error</i> )</li>
<li><div class="fn"/>void <b><a href="qobexpushservice.html#stateChanged">stateChanged</a></b> ( QObexPushService::State <i>state</i> )</li>
</ul>
<ul>
<li><div class="fn"/>1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
</ul>
<a name="protected-functions"></a>
<h3>Protected Functions</h3>
<ul>
<li><div class="fn"/>virtual bool <b><a href="qobexpushservice.html#acceptFile">acceptFile</a></b> ( const QString &amp; <i>filename</i>, const QString &amp; <i>mimetype</i>, qint64 <i>size</i> )</li>
</ul>
<ul>
<li><div class="fn"/>8 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"/>1 property inherited from <a href="qobject.html#properties">QObject</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
<li><div class="fn"/>1 public type inherited from <a href="qobject.html#public-variables">QObject</a></li>
<li><div class="fn"/>4 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"/>2 protected variables inherited from <a href="qobject.html#protected-variables">QObject</a></li>
<li><div class="fn"/>1 static protected member inherited from <a href="qobject.html#static-protected-members">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QObexPushService class encapsulates an OBEX Push service.</p>
<p>The QObexPushService class can be used to provide OBEX Push services over Bluetooth, Infrared or any other OBEX capable transport. This class implements the Bluetooth Object Push Profile, and can also be used to implement the Infrared IrXfer service.</p>
<p>When using QObexPushService, you should call <a href="qobexpushservice.html#setIncomingDirectory">setIncomingDirectory</a>() to set the incoming directory for received files. If you want to control whether an incoming file should be accepted, subclass QObexPushService and override the <a href="qobexpushservice.html#acceptFile">acceptFile</a>() function. Subclasses can also override <a href="qobexpushservice.html#businessCard">businessCard</a>() to provide the default business card object that may be requested by an OBEX Push client.</p>
<p>When an OBEX client sends a file to the service, the <a href="qobexpushservice.html#acceptFile">acceptFile</a>() function is called to determine whether the file transfer should be allowed. If the transfer is accepted, the <a href="qobexpushservice.html#putRequest">putRequest</a>() signal is emitted with the details of the incoming file, and the <a href="qobexpushservice.html#progress">progress</a>() signal will be emitted at intervals to show the progress of the file transfer operation. The <a href="qobexpushservice.html#requestComplete">requestComplete</a>() signal is emitted when the transfer is complete.</p>
<p>Similarly, when an OBEX client requests a file (such as the default business card), the <a href="qobexpushservice.html#getRequest">getRequest</a>() signal is emitted, and the <a href="qobexpushservice.html#progress">progress</a>() signal will be emitted at intervals. The <a href="qobexpushservice.html#requestComplete">requestComplete</a>() signal is emitted when the transfer is complete.</p>
<p>Finally, the <a href="qobexpushservice.html#done">done</a>() signal is emitted when the OBEX client disconnects or if the connection is terminated.</p>
<p>See also <a href="qobexserver.html">QObexServer</a>.</p>
<hr />
<h2>Member Type Documentation</h2>
<h3 class="fn"><a name="Error-enum"></a>enum QObexPushService::Error</h3>
<p>Defines the possible errors for a push service.</p>
<p><table border="1" cellpadding="2" cellspacing="1" width="100%">
<tr><th width="25%">Constant</th><th width="15%">Value</th><th width="60%">Description</th></tr>
<tr><td valign="top"><tt>QObexPushService::NoError</tt></td><td align="center" valign="top"><tt>0</tt></td><td valign="top">No error has occurred.</td></tr>
<tr><td valign="top"><tt>QObexPushService::LinkError</tt></td><td align="center" valign="top"><tt>1</tt></td><td valign="top">The connection link has been interrupted.</td></tr>
<tr><td valign="top"><tt>QObexPushService::Aborted</tt></td><td align="center" valign="top"><tt>2</tt></td><td valign="top">The request was aborted by the client.</td></tr>
<tr><td valign="top"><tt>QObexPushService::UnknownError</tt></td><td align="center" valign="top"><tt>100</tt></td><td valign="top">An error other than those specified above occurred.</td></tr>
</table></p>
<h3 class="fn"><a name="State-enum"></a>enum QObexPushService::State</h3>
<p>Defines the possible states for a push service.</p>
<p><table border="1" cellpadding="2" cellspacing="1" width="100%">
<tr><th width="25%">Constant</th><th width="15%">Value</th><th width="60%">Description</th></tr>
<tr><td valign="top"><tt>QObexPushService::Ready</tt></td><td align="center" valign="top"><tt>0</tt></td><td valign="top">The service is ready to receive requests from an OBEX client. This is the default state.</td></tr>
<tr><td valign="top"><tt>QObexPushService::Connecting</tt></td><td align="center" valign="top"><tt>1</tt></td><td valign="top">A client is connecting.</td></tr>
<tr><td valign="top"><tt>QObexPushService::Disconnecting</tt></td><td align="center" valign="top"><tt>2</tt></td><td valign="top">A client is disconnecting.</td></tr>
<tr><td valign="top"><tt>QObexPushService::Streaming</tt></td><td align="center" valign="top"><tt>3</tt></td><td valign="top">A file transfer operation is in progress.</td></tr>
<tr><td valign="top"><tt>QObexPushService::Closed</tt></td><td align="center" valign="top"><tt>100</tt></td><td valign="top">The service has been closed and cannot process any more requests.</td></tr>
</table></p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QObexPushService"></a>QObexPushService::QObexPushService ( <a href="qobexsocket.html">QObexSocket</a> * <i>socket</i>, <a href="qobject.html">QObject</a> * <i>parent</i> = 0 )</h3>
<p>Constructs an OBEX Push service. The <i>socket</i> parameter specifies the OBEX socket to use for the transport connection. The <i>parent</i> specifies the parent object.</p>
<p>The socket must be connected; that is, you have either called <a href="qobexsocket.html#connect">QObexSocket::connect</a>() on the socket, or the socket has been obtained from <tt>QObexServer::nextPendingConnection()</tt>. Otherwise, the service will not be able to receive client requests.</p>
<h3 class="fn"><a name="dtor.QObexPushService"></a>QObexPushService::~QObexPushService ()</h3>
<p>Destroys the service.</p>
<h3 class="fn"><a name="acceptFile"></a>bool QObexPushService::acceptFile ( const <a href="qstring.html">QString</a> &amp; <i>filename</i>, const <a href="qstring.html">QString</a> &amp; <i>mimetype</i>, qint64 <i>size</i> )&nbsp;&nbsp;<tt> [virtual protected]</tt></h3>
<p>Override this function to provide custom intelligence as to whether to accept an incoming file or not (e.g&#x2e; popping a message box asking the user to accept, or using a file threshold, etc)</p>
<p>The <i>filename</i> holds the name of the file, <i>mimetype</i> holds the mimetype. The <i>size</i> parameter holds the size of the file.</p>
<p>The default implementation accepts all files unless no incoming directory is set.</p>
<p>Returns true on success; otherwise returns false.</p>
<h3 class="fn"><a name="businessCard"></a><a href="qbytearray.html">QByteArray</a> QObexPushService::businessCard () const&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Returns the business card that will be sent to OBEX clients who request it, as per the Business Card exchange feature of the Bluetooth Object Push Profile.</p>
<p>Subclasses should override this function to provide their personal business card data in vCard format. If an empty byte array is returned, all requests for business cards will be rejected.</p>
<h3 class="fn"><a name="close"></a>void QObexPushService::close ()</h3>
<p>Closes the service and sets the state to Closed. If an operation is in progress, the <a href="qobexpushservice.html#requestComplete">requestComplete</a>() and <a href="qobexpushservice.html#done">done</a>() signals will be emitted with their <tt>error</tt> argument set to <tt>true</tt>.</p>
<h3 class="fn"><a name="done"></a>void QObexPushService::done ( bool <i>error</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted when the OBEX client has disconnected from the service or if the connection has been terminated. The <i>error</i> value is <tt>true</tt> if an error occurred during the processing; otherwise <i>error</i> is <tt>false</tt>.</p>
<h3 class="fn"><a name="error"></a><a href="qobexpushservice.html#Error-enum">Error</a> QObexPushService::error () const</h3>
<p>Returns the last error that occurred.</p>
<h3 class="fn"><a name="getRequest"></a>void QObexPushService::getRequest ( const <a href="qstring.html">QString</a> &amp; <i>filename</i>, const <a href="qstring.html">QString</a> &amp; <i>mimetype</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted when an OBEX client makes a <tt>Get</tt> request to request a file from the service. The OBEX Push service only supports requests for business cards; as such, the <i>filename</i> will always be an empty string, and the <i>mimetype</i> will always be &quot;text/x-vCard&quot;.</p>
<h3 class="fn"><a name="incomingDirectory"></a>const <a href="qstring.html">QString</a> &amp; QObexPushService::incomingDirectory () const</h3>
<p>Returns the incoming directory.</p>
<p>See also <a href="qobexpushservice.html#setIncomingDirectory">setIncomingDirectory</a>().</p>
<h3 class="fn"><a name="progress"></a>void QObexPushService::progress ( qint64 <i>completed</i>, qint64 <i>total</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted during file transfer operations to indicate the progress of the transfer. The <i>completed</i> value is the number of bytes that have been sent or received so far, and <i>total</i> is the total number of bytes to be sent or received.</p>
<h3 class="fn"><a name="putRequest"></a>void QObexPushService::putRequest ( const <a href="qstring.html">QString</a> &amp; <i>filename</i>, const <a href="qstring.html">QString</a> &amp; <i>mimetype</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted when an OBEX client makes a <tt>Put</tt> request to send a file to the service. The <i>filename</i> parameter contains the filename for the request, and <i>mimetype</i> contains the mimetype.</p>
<h3 class="fn"><a name="requestComplete"></a>void QObexPushService::requestComplete ( bool <i>error</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted when a client request is completed. The <i>error</i> value is <tt>true</tt> if an error occurred during the request; otherwise <i>error</i> is <tt>false</tt>.</p>
<h3 class="fn"><a name="setIncomingDirectory"></a>void QObexPushService::setIncomingDirectory ( const <a href="qstring.html">QString</a> &amp; <i>dir</i> )</h3>
<p>Sets the incoming directory to <i>dir</i>. This directory will be used to place all files which are being received by the service.</p>
<p>See also <a href="qobexpushservice.html#incomingDirectory">incomingDirectory</a>() and <a href="qobexpushservice.html#acceptFile">acceptFile</a>().</p>
<h3 class="fn"><a name="socket"></a><a href="qobexsocket.html">QObexSocket</a> * QObexPushService::socket ()</h3>
<p>Returns the socket associated with this service.</p>
<h3 class="fn"><a name="state"></a><a href="qobexpushservice.html#State-enum">State</a> QObexPushService::state () const</h3>
<p>Returns the current state of the service.</p>
<h3 class="fn"><a name="stateChanged"></a>void QObexPushService::stateChanged ( <a href="qobexpushservice.html#State-enum">QObexPushService::State</a> <i>state</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted when the state of the service changes. The <i>state</i> is the new state of the client.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2007 <a href="trolltech.html">Trolltech</a></td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qtopia 4.2.4</div></td>
</tr></table></div></address></body>
</html>
