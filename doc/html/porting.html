<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Porting Between Qtopia Versions</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></td></tr></table><h1 align="center">Porting Between Qtopia Versions<br /><small></small></h1>
<a name="top"></a><ul><li><a href="#overview">Overview</a></li>
<li><a href="#porting-from-qtopia-2">Porting from Qtopia 2</a></li>
<li><a href="#porting-to-qtopia-4-2-0">Porting to Qtopia 4.2.0</a></li>
<ul><li><a href="#telephony-api">Telephony API</a></li>
<li><a href="#network-api">Network API</a></li>
</ul>
<li><a href="#porting-to-qtopia-4-2-1">Porting to Qtopia 4.2.1</a></li>
<li><a href="#porting-to-qtopia-4-2-2">Porting to Qtopia 4.2.2</a></li>
</ul>
<a name="overview"></a>
<h2>Overview</h2>
<p>Porting an application from one Qtopia version to another depends on the source and binary compatibility between the versions.</p>
<p>The general rules are:</p>
<ul>
<li>Major versions (eg. Qtopia 2 versus Qtopia 3 or Qtopia 4) are not source compatible (and certainly not binary compatible)</li>
<li>Minor versions (eg. Qtopia 4.3 versus Qtopia 4.4) are binary and source compatible in the direction of more functionality</li>
<li>Patch versions (eg. Qtopia 4.3.1 versus Qtopia 4.3.2) are binary and source compatible in both directions</li>
</ul>
<p><i>However</i>, there are exceptions to these rules, because compatibility between releases is a compromise between improving the API to make future development effort less, and minimizing porting effort. The incompatibilities scheduled for Qtopia are:</p>
<p><table align="center" cellpadding="2" cellspacing="1" border="0">
<thead><tr valign="top" class="qt-style"><th>Version</th><th>Compatiblity</th></tr></thead>
<tr valign="top" class="odd"><td>4.1.0 to 4.1.6</td><td>Significant incompatibilities in many API components.</td></tr>
<tr valign="top" class="even"><td>4.1.7 to 4.1.99</td><td>No incompatibilities introduced.</td></tr>
<tr valign="top" class="odd"><td>4.2.0</td><td>Significant incompatibilities in a small number of API components.</td></tr>
<tr valign="top" class="even"><td>4.2.1</td><td>Minor incompatibilities in a small number of API components.</td></tr>
<tr valign="top" class="odd"><td>4.2.2</td><td>Minor incompatibilities in a small number of API components.</td></tr>
<tr valign="top" class="even"><td>4.2.3</td><td>No incompatibilities.</td></tr>
<tr valign="top" class="odd"><td>4.3.0</td><td>No source incompatibilities.</td></tr>
<tr valign="top" class="even"><td>Subsequent</td><td>Standard compatibility rules apply.</td></tr>
</table></p>
<p>Of course, while compatibility is not available between some versions, considerable steps, such as the information below, are taken to minimize the porting effort.</p>
<a name="porting-from-qtopia-2"></a>
<h2>Porting from Qtopia 2</h2>
<p>Porting an application from Qtopia 2 to any Qtopia 4 series involves changing the application code corresponding to how the API for Qtopia has changed.</p>
<p>Primarily, porting changes will relate to the changes in the Qt API. Qtopia does <i>not</i> support the <a href="http://doc.trolltech.com/4.1/qt3support.html">Qt 3 Support</a> module, so the task of porting from Qtopia 2 to Qtopia 4 takes more work than porting from Qt 2 to Qt 4, however the key documents remain:</p>
<ul>
<li><a href="http://doc.trolltech.com/3.3/porting.html">Porting Qt 2 to Qt 3</a></li>
<li><a href="porting4.html">Porting Qt 3 to Qt 4</a></li>
<li><a href="qtopiacore-porting-device.html">Porting Qtopia Core to a New Architecture</a></li>
<li><a href="qtopiacore-porting-operatingsystem.html">Porting Qtopia Core to Another Operating System</a></li>
<li><a href="porting2to4.html">Porting to Qtopia 4</a></li>
</ul>
<a name="porting-to-qtopia-4-2-0"></a>
<h2>Porting to Qtopia 4.2.0</h2>
<p>The API of Qtopia 4.2.0 is very similar to that of Qtopia 4.1. The most notable exception is that the Telephony APIs have been significantly updated.</p>
<a name="telephony-api"></a>
<h3>Telephony API</h3>
<p>Qtopia 4.1's Telephony API used a central <tt>QPhoneLine</tt> object, from which all telephony features were accessed. This class has been replaced with several classes for each area of telephony functionality. In particular, previous code that used <tt>QPhoneLine::query()</tt> and <tt>QPhoneLine::modify()</tt> must be modified to use methods in the classes below:</p>
<p><table align="center" cellpadding="2" cellspacing="1" border="0">
<thead><tr valign="top" class="qt-style"><th>Interface</th><th>Description</th></tr></thead>
<tr valign="top" class="odd"><td>QAdviceOfCharge</td><td>Advice of charge information during a call.</td></tr>
<tr valign="top" class="even"><td>QBandSelection</td><td>Selection of GSM bands - 850 MHz, 900 MHz, 1800 MHz, 1900 MHz, dual, and tri-band.</td></tr>
<tr valign="top" class="odd"><td>QCallBarring</td><td>Settings related to call barring.</td></tr>
<tr valign="top" class="even"><td>QCallForwarding</td><td>Settings related to call forwarding.</td></tr>
<tr valign="top" class="odd"><td>QCallSettings</td><td>Other call settings: call waiting and caller ID restrictriction.</td></tr>
<tr valign="top" class="even"><td>QCellBroadcast</td><td>Access to cell broadcast messages.</td></tr>
<tr valign="top" class="odd"><td>QGprsNetworkRegistration</td><td>Notification of GPRS registration state.</td></tr>
<tr valign="top" class="even"><td>QNetworkRegistration</td><td>Notification of general network registration state, plus operator selection.</td></tr>
<tr valign="top" class="odd"><td>QPhoneBook</td><td>Access to phone books that are stored on a SIM.</td></tr>
<tr valign="top" class="even"><td>QPhoneCallManager</td><td>Making and receiving calls: voice, data, fax, etc.</td></tr>
<tr valign="top" class="odd"><td>QPhoneRfFunctionality</td><td>Manipulation of the RF functionality level for selecting airplane and non-airplane modes.</td></tr>
<tr valign="top" class="even"><td>QPinManager</td><td>Notification of PIN requests, and PIN management (change, lock, unlock, etc).</td></tr>
<tr valign="top" class="odd"><td>QPreferredNetworkOperators</td><td>Access to the preferred network operator list in a SIM.</td></tr>
<tr valign="top" class="even"><td>QPresence</td><td>VoIP presence information.</td></tr>
<tr valign="top" class="odd"><td>QServiceChecker</td><td>Check that a service was started and has sufficient resources to perform operations.</td></tr>
<tr valign="top" class="even"><td>QServiceNumbers</td><td>Access to service numbers such as SMS service center and the voice mail number.</td></tr>
<tr valign="top" class="odd"><td>QSimFiles</td><td>Raw access to files on the SIM.</td></tr>
<tr valign="top" class="even"><td>QSimInfo</td><td>Information about the SIM's identity and whether or not it is currently inserted.</td></tr>
<tr valign="top" class="odd"><td>QSimToolkit</td><td>Access to SIM Application Toolkit features of the SIM.</td></tr>
<tr valign="top" class="even"><td>QSMSReader</td><td>Access to the incoming SMS message queue.</td></tr>
<tr valign="top" class="odd"><td>QSMSSender</td><td>Access to the outgoing SMS message queue.</td></tr>
<tr valign="top" class="even"><td>QSupplementaryServices</td><td>SS and USSD support for GSM networks.</td></tr>
<tr valign="top" class="odd"><td>QTelephonyConfiguration</td><td>Service configuration interface and miscellaneous settings.</td></tr>
</table></p>
<p>Modem vendor plugins and multiplexer implementations from Qtopia 4.1 must also be updated. See the following pages for more information:</p>
<ul>
<li><a href="syscust-gsm.html">GSM Modem Integration</a></li>
<li><a href="tut-multiplexing.html">Tutorial: Writing a Multiplexer Plug-in</a></li>
</ul>
<p>OTA SMS and WAP Push messages are now dispatched using the QDS service system. See <a href="ota.html">OTA Support</a> for more information.</p>
<a name="network-api"></a>
<h3>Network API</h3>
<p>The Network APIs have been extended by moving device specific information from <a href="qnetworkstate.html">QNetworkState</a> to the new class <a href="qnetworkdevice.html">QNetworkDevice</a>. In addition <a href="qnetworkinterface.html">QNetworkInterface</a> (introduced by Qt 4.2) replaces <a href="qhostaddress.html">QHostAddress</a> throughout the Network API's.</p>
<p>The table below lists the function conversions for porting to Qtopia 4.2.0.</p>
<p><table align="center" cellpadding="2" cellspacing="1" border="0">
<thead><tr valign="top" class="qt-style"><th>Qtopia 4.1.x</th><th>Qtopia 4.2.0</th></tr></thead>
<tr valign="top" class="odd"><td>QNetworkState::addess()</td><td><a href="qnetworkdevice.html#address">QNetworkDevice::address</a>()</td></tr>
<tr valign="top" class="even"><td>QNetworkState::interfaces()</td><td><a href="qnetworkstate.html#availableNetworkDevices">QNetworkState::availableNetworkDevices</a>()</td></tr>
<tr valign="top" class="odd"><td>QtopiaNetwork::networkOnline()</td><td><a href="qtopianetwork.html#online">QtopiaNetwork::online</a>(), <a href="qnetworkstate.html#connected">QNetworkState::connected</a>(), <a href="qnetworkstate.html#disconnected">QNetworkState::disconnected</a>()</td></tr>
<tr valign="top" class="even"><td>QtopiaNetwork::shutdownNetwork()</td><td><a href="qtopianetwork.html#shutdown">QtopiaNetwork::shutdown</a>()</td></tr>
<tr valign="top" class="odd"><td>QtopiaNetwork::toType()</td><td><a href="qnetworkstate.html#deviceType">QNetworkState::deviceType</a>()</td></tr>
</table></p>
<a name="porting-to-qtopia-4-2-1"></a>
<h2>Porting to Qtopia 4.2.1</h2>
<a name="porting-to-qtopia-4-2-2"></a>
<h2>Porting to Qtopia 4.2.2</h2>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="30%">Copyright &copy; 2007 <a href="trolltech.html">Trolltech</a></td>
<td width="40%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td width="30%" align="right"><div align="right">Qtopia 4.2.1</div></td>
</tr></table></div></address></body>
</html>
