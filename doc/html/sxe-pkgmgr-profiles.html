<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>SXE - Policy Profiles and Domains</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></td></tr></table><h1 align="center">SXE - Policy Profiles and Domains<br /><small></small></h1>
<ul><li><a href="#formulating-policy-profiles-and-domains">Formulating Policy Profiles and Domains</a></li>
<li><a href="#policy-profile-examples">Policy Profile Examples</a></li>
</ul>
<p>The following sections describe the methods to formulate policy profiles and domains and provides examples of policy profiles and their effects.</p>
<a name="formulating-policy-profiles-and-domains"></a>
<h2>Formulating Policy Profiles and Domains</h2>
<p>When developing or customizing Qtopia applications, as part of the engineering process, policy profiles and sxe domains must also be formulated.</p>
<p>Tools to assist in developing policy are:</p>
<ul>
<li>SXE Discovery Mode: If Qtopiacore is compiled in debug mode and the <tt>SXE_DISCOVERY_MODE</tt> environment variable is exported <tt>qpe</tt> will operate in SXE Discovery Mode. This mode has severe performance impacts but is useful for finding which policy requests an application is making. These will all be logged in <tt>/tmp/qtopia-0/sxe_discovery.log</tt> (where 0 is the session).</li>
<li><tt>$QPEDIR/scripts/dumpsec.pl</tt> : this perl script will present SXE information including the current Program Identifiers. If the script is invoked as <tt>dumpsec.pl progname</tt>, where <i>progname</i> is for example <tt>Camera</tt>, a detailed SXE listing will be shown for that application</li>
<li>Warning output: If running with a console for <tt>qpe tty</tt> output some useful warnings should be displayed when a request is denied.</li>
</ul>
<p>To create your applications policy edit these files:</p>
<ul>
<li><tt>app.pro</tt> - your applications <tt>.pro qmake</tt> file. This should have a set of <i>pkg.*</i> entries, one of which must be the <tt>pkg.domain</tt> entry. Set this to a comma-delimited list of the SXE domains you wish to award to the application, for example, <tt>pkg.domain=window,phonecomm</tt>.</li>
<li><tt>etc/sxe.profiles</tt> : if the application has the correct domains but the profile listing for that domain does not contain a request which it ought to, it may be added by editing this file. Entries toward the bottom of the file are as a rule-of-thumb for more security sensitive applications. Read the descriptions in the next section to be sure you do not alter the meaning or the scope of the domain.</li>
</ul>
<p>If you create a new type of Service or QCop message generally it will need to be added to the <tt>sxe.profiles</tt> file.</p>
<p><b>Important:</b> after changing policies do the following:</p>
<ol type="1">
<li><tt>make install</tt> in the build root directory</li>
<li>run <tt>sxe_installer</tt>.</li>
</ol>
<p>To trouble-shoot SXE problems follow these steps:</p>
<ul>
<li>run <tt>make install &amp;&amp; sxe_installer</tt></li>
<li>use the <tt>dumpsec.pl</tt> script to ensure that the problem application has the Program Identifier expected</li>
<li>check the applications <tt>.pro</tt> file to ensure the correct domain list has been awarded to the application</li>
<li>compile in debug mode and export <tt>SXE_DISCOVERY_MODE</tt> to see what applications are making requests.</li>
</ul>
<a name="policy-profile-examples"></a>
<h2>Policy Profile Examples</h2>
<p>The <tt>qipkg</tt> system is extended to provide additional information to the SXE system using the Domain field. The list below shows each value, its effect on the access granted to the application, and the install information displayed to the user.</p>
<p>Note: do not change the format of this table.</p>
<p>The script <tt>scripts/extract_sxe_profiles.pl</tt> may be used to create the in code table of user visible policy strings in the package manager.</p>
<p><table align="center" cellpadding="2" cellspacing="1" border="0">
<thead><tr valign="top" class="qt-style"><th>SXE Profile name</th><th>Access Controls Effect</th><th>Information display</th><th>Risk level</th></tr></thead>
<tr valign="top" class="odd"><td>base</td><td>Allow qtopia system level access, not available unless package is signed. Automatically has access as for all the other categories. Intended for use for OTA upgrades (ie equivalent to reflash).</td><td><i>New system for your Qtopia device</i></td><td>High</td></tr>
<tr valign="top" class="even"><td>libs</td><td>Allow qtopia library load access, not available unless package is signed. Automatically has access for all other categories. Reserved for use for OTA updates (ie equivalent to major patch), and plug-in libraries.</td><td><i>New system items for your Qtopia device</i></td><td>High</td></tr>
<tr valign="top" class="odd"><td>phonecomm</td><td>Allow file level access to /dev for low level phone or device functionality, not available unless package is signed. Automatically has access as for all other categories. Intended for use by OEMs providing new apps or updates.</td><td><i>Use [phone|device] hardware</i></td><td>High</td></tr>
<tr valign="top" class="even"><td>docapi</td><td>Allow file level access to user Documents, optionally restricted by mime-type</td><td><i>Edit and delete your [mime-type user description, eg MP3, jpeg] files</i></td><td>Medium</td></tr>
<tr valign="top" class="odd"><td>pim</td><td>Allow App level access to modify Personal Information Management records</td><td><i>Edit and delete your PIM data</i></td><td>Medium</td></tr>
<tr valign="top" class="even"><td>msg</td><td>Allow app level access to SMS and MMS messaging</td><td><i>send text and media messages</i></td><td>Medium</td></tr>
<tr valign="top" class="odd"><td>net</td><td>Allow file and app level access to WAP, GSM, GPRS.</td><td><i>download and talk over your [phone/device]'s internet service</i></td><td>Medium</td></tr>
<tr valign="top" class="even"><td>netconfig</td><td>Allow the creation, deletion, starting and stopping of network interface configurations</td><td><i>start, stop and configure network interfaces</i></td><td>Medium</td></tr>
<tr valign="top" class="odd"><td>alarm</td><td>Allow the creation and deletion of alarms</td><td><i>create, delete and check status of alarms</i></td><td>Medium</td></tr>
<tr valign="top" class="even"><td>beaming</td><td>Allow the beaming of files and Vcards over irda (obex)</td><td><i>send and receive files over infrared interfaces</i></td><td>Medium</td></tr>
<tr valign="top" class="odd"><td>bluetooth</td><td>Allow bluetooth connections to other devices and the sending of files and Vcards using bluetooth</td><td><i>connect, pair, send and receive files over bluetooth interfaces</i></td><td>Medium</td></tr>
<tr valign="top" class="even"><td>cardreader</td><td>Allow access to the cardreader to access sd cards, compact flash etc</td><td><i>read and write data to/from memory cards</i></td><td>Low</td></tr>
<tr valign="top" class="odd"><td>camera</td><td>Allow access to the camera for capturing images</td><td><i>capture images using camera device</i></td><td>Low</td></tr>
<tr valign="top" class="even"><td>datetime</td><td>Allow setting of the system date, time and timezone</td><td><i>set date, time and timezone</i></td><td>Low</td></tr>
<tr valign="top" class="odd"><td>drm</td><td>Digital Rights Management</td><td><i>download, use and check the rights on DRM enabled files</i></td><td>High</td></tr>
<tr valign="top" class="even"><td>handwriting</td><td>Allow the use of handwriting as an input method on the device</td><td><i>allow handwriting as an input medthod</i></td><td>Low</td></tr>
<tr valign="top" class="odd"><td>helix</td><td>Allow access to helix for playing sound and video files</td><td><i>play media files using helix</i></td><td>Low</td></tr>
<tr valign="top" class="even"><td>language</td><td>Allow access to change the system language</td><td><i>change system language</i></td><td>Low</td></tr>
<tr valign="top" class="odd"><td>lightandpower</td><td>Allow changes to power management and lighting settings such as dimming and turning the light off</td><td><i>power management and lighting settings</i></td><td>Low</td></tr>
<tr valign="top" class="even"><td>mediarecorder</td><td>Allow the recording of sound files</td><td><i>record sound files</i></td><td>Low</td></tr>
<tr valign="top" class="odd"><td>pictures</td><td>Allow access and editing of image files</td><td><i>view and edit image files</i></td><td>Low</td></tr>
<tr valign="top" class="even"><td>qdl</td><td>Qtopia Document Linking - allows calender, tasks and contacts to link to other documents/objects</td><td><i>link to documents/objects</i></td><td>Low</td></tr>
<tr valign="top" class="odd"><td>quicklauncher</td><td>Allows quicklauncher to morph into other applications</td><td><i>run applications using quicklauncher</i></td><td>High</td></tr>
<tr valign="top" class="even"><td>profiles</td><td>Allows the changing of all Settings associated with Profiles, Appearance and Light and Power</td><td><i>change Profile, Appearance and Light and Power settings</i></td><td>Medium</td></tr>
<tr valign="top" class="odd"><td>screensaver</td><td>Allows the setting of the screensaver</td><td><i>set screensaver</i></td><td>Low</td></tr>
<tr valign="top" class="even"><td>security</td><td>Allows changing the phone and sim security settings such as the pin</td><td><i>change phone and sim security settings</i></td><td>Medium</td></tr>
<tr valign="top" class="odd"><td>sxemonitor</td><td>Allows sxemonitor to issue security alerts</td><td><i>issue security alerts using sxemonitor</i></td><td>High</td></tr>
<tr valign="top" class="even"><td>words</td><td>Allows access to the dictionary for updating words</td><td><i>add words to dictionary</i></td><td>Low</td></tr>
<tr valign="top" class="odd"><td>window</td><td>Allow windowed graphic <a href="sxe-pkgmgr-dispsec.html">display</a></td><td><i>Use your display</i></td><td>Low</td></tr>
<tr valign="top" class="even"><td>graphics</td><td>Allow full-screen graphic display*</td><td><i>use your whole display</i> eg game, or OpenGL ES accelerated.</td><td>Medium</td></tr>
<tr valign="top" class="odd"><td>theme</td><td>Installed Qtopia theme</td><td>no actual display to user</td><td>Low</td></tr>
<tr valign="top" class="even"><td>none</td><td>No domains requested</td><td>no actual display to user</td><td>Low</td></tr>
</table></p>
<p>The installation mechanism makes it difficult for a package to gain access to perform unexpected behaviors. Because the package must declare the access it requires, it is plain to the user before the package is downloaded or installed. For example a trojan that purported to be a screen-saver but requested web access would have this show up in red &quot;download and talk over your phones internet service&quot;, prior to download and install.</p>
<p>In the example below a user is looking for a package to install. This one accesses the users PIM data - if that was not what the user was expecting they will choose another package instead.</p>
<p align="center"><img src="images/packagemanager.png" /></p><p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="30%">Copyright &copy; 2007 <a href="trolltech.html">Trolltech</a></td>
<td width="40%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td width="30%" align="right"><div align="right">Qtopia 4.2.1</div></td>
</tr></table></div></address></body>
</html>
