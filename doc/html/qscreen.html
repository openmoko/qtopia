<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- /home/ianw/nightly/qt-2.3.4/src/kernel/qgfxraster_qws.cpp:5102 -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>QScreen Class</title>
<style type="text/css"><!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
body { background: #ffffff; color: black; }
--></style>
</head>
<body>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr bgcolor="black"><td>
<a href="classes.html"><font color="white">Qt API</font></a>
<font color="white">|</font>
<a href="../classes.html"> <font color="white">Qtopia API</font></a>
</td>
<td align="right"><a href="../index.html"><font color="white"><i>Qtopia Documentation</i></font></a></td>
<td align="right" valign="center"><img src="logo32.png" align="right" width="64" height="32" border="0"></td></tr></table><h1 align=center>QScreen Class Reference</h1>

<p>Descendants of QScreen manage the framebuffer and palette and act as 
factories for the screen cursor and QGfx's. QLinuxFbScreen manages
a Linux framebuffer; accelerated drivers subclass QLinuxFbScreen.
There can only be one screen in a Qt/Embedded application.
<a href="#details">More...</a>
<p><tt>#include &lt;<a href="qgfx_qws-h.html">qgfx_qws.h</a>&gt;</tt>
<p>Inherited by <a href="qlinuxfbscreen.html">QLinuxFbScreen</a>.
<p><a href="qscreen-members.html">List of all member functions.</a>
<h2>Public Members</h2>
<ul>
<li><div class=fn><a href="#QScreen"><b>QScreen</b></a> ( int&nbsp;display_id )</div></li>
<li><div class=fn>virtual <a href="#~QScreen"><b>~QScreen</b></a> ()</div></li>
<li><div class=fn>virtual bool <b>initDevice</b> () = 0</div></li>
<li><div class=fn>virtual bool <b>connect</b> ( const&nbsp;QString&nbsp;&amp;&nbsp;displaySpec ) = 0</div></li>
<li><div class=fn>virtual void <b>disconnect</b> () = 0</div></li>
<li><div class=fn>virtual int <a href="#initCursor"><b>initCursor</b></a> ( void&nbsp;*&nbsp;end_of_location, bool&nbsp;init = FALSE )</div></li>
<li><div class=fn>virtual void <a href="#shutdownDevice"><b>shutdownDevice</b></a> ()</div></li>
<li><div class=fn>virtual void <b>setMode</b> ( int, int, int ) = 0</div></li>
<li><div class=fn>virtual bool <a href="#supportsDepth"><b>supportsDepth</b></a> ( int&nbsp;d ) const</div></li>
<li><div class=fn>virtual QGfx * <a href="#createGfx"><b>createGfx</b></a> ( unsigned&nbsp;char&nbsp;*&nbsp;bytes, int&nbsp;w, int&nbsp;h, int&nbsp;d, int&nbsp;linestep )</div></li>
<li><div class=fn>virtual QGfx * <a href="#screenGfx"><b>screenGfx</b></a> ()</div></li>
<li><div class=fn>virtual void <a href="#save"><b>save</b></a> ()</div></li>
<li><div class=fn>virtual void <a href="#restore"><b>restore</b></a> ()</div></li>
<li><div class=fn>virtual void <b>blank</b> ( bool&nbsp;on )</div></li>
<li><div class=fn>virtual int <b>pixmapOffsetAlignment</b> ()</div></li>
<li><div class=fn>virtual int <b>pixmapLinestepAlignment</b> ()</div></li>
<li><div class=fn>virtual bool <a href="#onCard"><b>onCard</b></a> ( unsigned&nbsp;char&nbsp;*&nbsp;p ) const</div></li>
<li><div class=fn>virtual bool <a href="#onCard-2"><b>onCard</b></a> ( unsigned&nbsp;char&nbsp;*&nbsp;p, ulong&nbsp;&amp;&nbsp;offset ) const</div></li>
<li><div class=fn>virtual void <a href="#set"><b>set</b></a> ( unsigned int, unsigned int, unsigned int, unsigned int )</div></li>
<li><div class=fn>virtual int <a href="#alloc"><b>alloc</b></a> ( unsigned&nbsp;int&nbsp;r, unsigned&nbsp;int&nbsp;g, unsigned&nbsp;int&nbsp;b )</div></li>
<li><div class=fn>int <b>width</b> () const</div></li>
<li><div class=fn>int <b>height</b> () const</div></li>
<li><div class=fn>int <b>depth</b> () const</div></li>
<li><div class=fn>virtual int <b>pixmapDepth</b> () const</div></li>
<li><div class=fn>int <a href="#pixelType"><b>pixelType</b></a> () const</div></li>
<li><div class=fn>int <b>linestep</b> () const</div></li>
<li><div class=fn>int <b>deviceWidth</b> () const</div></li>
<li><div class=fn>int <b>deviceHeight</b> () const</div></li>
<li><div class=fn>uchar * <b>base</b> () const</div></li>
<li><div class=fn>virtual uchar * <b>cache</b> ( int, int )</div></li>
<li><div class=fn>virtual void <b>uncache</b> ( uchar * )</div></li>
<li><div class=fn>int <b>screenSize</b> () const</div></li>
<li><div class=fn>int <b>totalSize</b> () const</div></li>
<li><div class=fn>QRgb * <b>clut</b> ()</div></li>
<li><div class=fn>int <b>numCols</b> ()</div></li>
<li><div class=fn>virtual QSize <b>mapToDevice</b> ( const QSize &amp; ) const</div></li>
<li><div class=fn>virtual QSize <b>mapFromDevice</b> ( const QSize &amp; ) const</div></li>
<li><div class=fn>virtual QPoint <b>mapToDevice</b> ( const QPoint &amp;, const QSize &amp; ) const</div></li>
<li><div class=fn>virtual QPoint <b>mapFromDevice</b> ( const QPoint &amp;, const QSize &amp; ) const</div></li>
<li><div class=fn>virtual QRect <b>mapToDevice</b> ( const QRect &amp;, const QSize &amp; ) const</div></li>
<li><div class=fn>virtual QRect <b>mapFromDevice</b> ( const QRect &amp;, const QSize &amp; ) const</div></li>
<li><div class=fn>virtual QImage <b>mapToDevice</b> ( const QImage &amp; ) const</div></li>
<li><div class=fn>virtual QImage <b>mapFromDevice</b> ( const QImage &amp; ) const</div></li>
<li><div class=fn>virtual QRegion <b>mapToDevice</b> ( const QRegion &amp;, const QSize &amp; ) const</div></li>
<li><div class=fn>virtual QRegion <b>mapFromDevice</b> ( const QRegion &amp;, const QSize &amp; ) const</div></li>
<li><div class=fn>virtual int <b>transformOrientation</b> () const</div></li>
<li><div class=fn>virtual bool <b>isTransformed</b> () const</div></li>
<li><div class=fn>virtual bool <b>isInterlaced</b> () const</div></li>
</ul>
<hr><a name="details"></a><h2>Detailed Description</h2>


Descendants of QScreen manage the framebuffer and palette and act as 
factories for the screen cursor and QGfx's. <a href="qlinuxfbscreen.html">QLinuxFbScreen</a> manages
a Linux framebuffer; accelerated drivers subclass QLinuxFbScreen.
There can only be one screen in a <a href="qt.html">Qt</a>/Embedded application.

<hr><h2>Member Function Documentation</h2>
<h3 class=fn><a name="QScreen"></a>QScreen::QScreen ( int&nbsp;display_id )
</h3>

Create a screen; the display_id is the number of the <a href="qt.html">Qt</a>/Embedded server
to connect to.

<h3 class=fn><a name="~QScreen"></a>QScreen::~QScreen ()<tt> [virtual]</tt>
</h3>

Destroys a QScreen

<h3 class=fn>int <a name="alloc"></a>QScreen::alloc ( unsigned&nbsp;int&nbsp;r, unsigned&nbsp;int&nbsp;g, unsigned&nbsp;int&nbsp;b )<tt> [virtual]</tt>
</h3>

Given an RGB value, return an index which is the closest match to it in
the screen's palette. Used in paletted modes only.

<h3 class=fn>QGfx * <a name="createGfx"></a>QScreen::createGfx ( unsigned&nbsp;char&nbsp;*&nbsp;bytes, int&nbsp;w, int&nbsp;h, int&nbsp;d, int&nbsp;linestep )<tt> [virtual]</tt>
</h3>

Creates a gfx on an arbitrary buffer, width and height in pixels, depth 
and linestep (length in bytes of each line in the buffer). Accelerated
drivers can check to see if bytes points into graphics memory
and create an accelerated Gfx.

<h3 class=fn>int <a name="initCursor"></a>QScreen::initCursor ( void&nbsp;*&nbsp;end_of_location, bool&nbsp;init = FALSE )<tt> [virtual]</tt>
</h3>

This is used to initialise the software cursor - end_of_location
points to the address after the area where the cursor image can be stored.
init is true for the first application this method is called from
(the <a href="qt.html">Qt</a>/Embedded server), false otherwise.

<h3 class=fn>bool <a name="onCard"></a>QScreen::onCard ( unsigned&nbsp;char&nbsp;*&nbsp;p ) const<tt> [virtual]</tt>
</h3>

Returns true if the buffer pointed to by p is within graphics card
memory, false if it's in main RAM.

<h3 class=fn>bool <a name="onCard-2"></a>QScreen::onCard ( unsigned&nbsp;char&nbsp;*&nbsp;p, ulong&nbsp;&amp;&nbsp;offset ) const<tt> [virtual]</tt>
</h3>

This checks whether the buffer specified by p is on the card
(as per the other version of onCard) and returns an offset in bytes
from the start of graphics card memory in offset if it is.

<h3 class=fn>int <a name="pixelType"></a>QScreen::pixelType () const
</h3>

Returns an integer (taking the same values as QGfx::PixelType)
that specifies the pixel storage format of the screen.

<h3 class=fn>void <a name="restore"></a>QScreen::restore ()<tt> [virtual]</tt>
</h3>

Restore the state of the graphics card from a previous <a href="#save">save</a>()

<p>Reimplemented in <a href="qlinuxfbscreen.html#restore">QLinuxFbScreen</a>.
<h3 class=fn>void <a name="save"></a>QScreen::save ()<tt> [virtual]</tt>
</h3>

Saves the state of the graphics card - used so that, for instance,
the palette can be restored when switching between linux virtual consoles.
Hardware QScreen descendants should save register state here if necessary
if switching between virtual consoles (for example to/from X) is to be
permitted.

<p>Reimplemented in <a href="qlinuxfbscreen.html#save">QLinuxFbScreen</a>.
<h3 class=fn>QGfx * <a name="screenGfx"></a>QScreen::screenGfx ()<tt> [virtual]</tt>
</h3>

Returns a QGfx (normally a QGfxRaster) initialised to point to the screen,
with an origin at 0,0 and a clip region covering the whole screen.

<h3 class=fn>void <a name="set"></a>QScreen::set ( unsigned int, unsigned int, unsigned int, unsigned int )<tt> [virtual]</tt>
</h3>

Set an entry in the colour palette. A noop in this class, implemented
in <a href="qlinuxfbscreen.html">QLinuxFbScreen</a>.

<p>Reimplemented in <a href="qlinuxfbscreen.html#set">QLinuxFbScreen</a>.
<h3 class=fn>void <a name="shutdownDevice"></a>QScreen::shutdownDevice ()<tt> [virtual]</tt>
</h3>

Called by the <a href="qt.html">Qt</a>/Embedded server on shutdown; never called by
a Qt/Embedded client. This is intended to support graphics card specific
shutdown; the unaccelerated implementation simply hides the mouse cursor.

<p>Reimplemented in <a href="qlinuxfbscreen.html#shutdownDevice">QLinuxFbScreen</a>.
<h3 class=fn>bool <a name="supportsDepth"></a>QScreen::supportsDepth ( int&nbsp;d ) const<tt> [virtual]</tt>
</h3>

Returns true if the screen supports a particular color depth.
Possible values are 1,4,8,16 and 32.

<!-- eof -->
<hr><p>
This file is part of the <a href="../index.html">Qtopia </a>,
copyright &copy; 1995-2002
<a href="http://www.trolltech.com/">Trolltech</a>, all rights reserved.<p><address><hr><div align=center>
<table width=100% cellspacing=0 border=0><tr>
<td>Copyright &copy; 2001-2002 Trolltech<td><a href="http://www.trolltech.com/trademarks.html">Trademarks</a>
<td align=right><div align=right>Qtopia version 1.6.0</div>
</table></div></address></body>
</html>
