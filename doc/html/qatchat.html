<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>QAtChat Class Reference</title>
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></td></tr></table><h1 align="center">QAtChat Class Reference</h1>
<p>The QAtChat class provides a simple mechanism for sending AT commands to modems <a href="#details">More...</a></p>
<pre>#include &lt;QAtChat&gt;</pre><p>Inherits <a href="qobject.html">QObject</a>.</p>
<ul>
<li><a href="qatchat-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/>void <b><a href="qatchat.html#abortDial">abortDial</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qatchat.html#chat">chat</a></b> ( const QString &amp; <i>command</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#chat-2">chat</a></b> ( const QString &amp; <i>command</i>, QObject * <i>target</i>, const char * <i>slot</i>, QAtResult::UserData * <i>data</i> = 0 )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#chatPDU">chatPDU</a></b> ( const QString &amp; <i>command</i>, const QByteArray &amp; <i>pdu</i>, QObject * <i>target</i>, const char * <i>slot</i>, QAtResult::UserData * <i>data</i> = 0 )</li>
<li><div class="fn"/>int <b><a href="qatchat.html#deadTimeout">deadTimeout</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qatchat.html#registerErrorPrefix">registerErrorPrefix</a></b> ( const QString &amp; <i>type</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#registerNotificationType">registerNotificationType</a></b> ( const QString &amp; <i>type</i>, QObject * <i>target</i>, const char * <i>slot</i>, bool <i>mayBeCommand</i> = false )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#requestNextLine">requestNextLine</a></b> ( QObject * <i>target</i>, const char * <i>slot</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#resume">resume</a></b> ()</li>
<li><div class="fn"/>int <b><a href="qatchat.html#retryOnNonEcho">retryOnNonEcho</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qatchat.html#send">send</a></b> ( const QString &amp; <i>command</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#setCPINTerminator">setCPINTerminator</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qatchat.html#setDeadTimeout">setDeadTimeout</a></b> ( int <i>msec</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#setDebugChars">setDebugChars</a></b> ( char <i>from</i>, char <i>to</i>, char <i>notify</i>, char <i>unknown</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#setRetryOnNonEcho">setRetryOnNonEcho</a></b> ( int <i>msec</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#suspend">suspend</a></b> ()</li>
</ul>
<ul>
<li><div class="fn"/>37 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
</ul>
<a name="signals"></a>
<h3>Signals</h3>
<ul>
<li><div class="fn"/>void <b><a href="qatchat.html#callNotification">callNotification</a></b> ( const QString &amp; <i>type</i> )</li>
<li><div class="fn"/>void <b><a href="qatchat.html#dead">dead</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qatchat.html#pduNotification">pduNotification</a></b> ( const QString &amp; <i>type</i>, const QByteArray &amp; <i>pdu</i> )</li>
</ul>
<ul>
<li><div class="fn"/>1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"/>1 property inherited from <a href="qobject.html#properties">QObject</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
<li><div class="fn"/>1 public type inherited from <a href="qobject.html#public-variables">QObject</a></li>
<li><div class="fn"/>4 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"/>8 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"/>2 protected variables inherited from <a href="qobject.html#protected-variables">QObject</a></li>
<li><div class="fn"/>1 static protected member inherited from <a href="qobject.html#static-protected-members">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QAtChat class provides a simple mechanism for sending AT commands to modems</p>
<p>The QAtChat interface provides a simple mechanism for sending AT commands to modems and retrieving the responses to those commands. It can be preferable to manually processing the raw binary data from a serial device.</p>
<p>QAtChat are obtained by calling <a href="qserialiodevice.html#atchat">QSerialIODevice::atchat</a>().</p>
<p>See also <a href="qserialiodevice.html">QSerialIODevice</a>.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="abortDial"></a>void QAtChat::abortDial ()</h3>
<p>Abort an <tt>ATD</tt> command. Usually just sends and empty line to the modem, but some modems use need <tt>ATH</tt> instead.</p>
<h3 class="fn"><a name="callNotification"></a>void QAtChat::callNotification ( const <a href="qstring.html">QString</a> &amp; <i>type</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when a call-related notification such as <tt>CONNECT</tt>, <tt>NO CARRIER</tt>, <tt>BUSY</tt>, etc occurs, but which was not associated with a corresponding <tt>ATD</tt> command. The <i>type</i> parameter is the text of the notification.</p>
<h3 class="fn"><a name="chat"></a>void QAtChat::chat ( const <a href="qstring.html">QString</a> &amp; <i>command</i> )</h3>
<p>Send <i>command</i> to the underlying device. If the command fails, the caller will not be notified.</p>
<h3 class="fn"><a name="chat-2"></a>void QAtChat::chat ( const <a href="qstring.html">QString</a> &amp; <i>command</i>, <a href="qobject.html">QObject</a> * <i>target</i>, const char * <i>slot</i>, <a href="qatresult-userdata.html">QAtResult::UserData</a> * <i>data</i> = 0 )</h3>
<p>This is an overloaded member function, provided for convenience.</p>
<p>Send <i>command</i> to the underlying device. When the command finishes, notify <i>slot</i> on <i>target</i>. The slot has the signature <tt>done(bool,QAtResult)</tt>. The boolean parameter indicates if the command succeeded or not, and the <a href="qatresult.html">QAtResult</a> parameter contains the full result data.</p>
<p>The optional <i>data</i> parameter can be used to pass extra user data that will be made available to the target slot in the <a href="qatresult.html#userData">QAtResult::userData</a>() field.</p>
<h3 class="fn"><a name="chatPDU"></a>void QAtChat::chatPDU ( const <a href="qstring.html">QString</a> &amp; <i>command</i>, const <a href="qbytearray.html">QByteArray</a> &amp; <i>pdu</i>, <a href="qobject.html">QObject</a> * <i>target</i>, const char * <i>slot</i>, <a href="qatresult-userdata.html">QAtResult::UserData</a> * <i>data</i> = 0 )</h3>
<p>Send <i>command</i> to the underlying device, followed by <i>pdu</i> on the next line. When the command finishes, notify <i>slot</i> on <i>target</i>.</p>
<p>The <i>pdu</i> will be transmitted in hexadecimal, followed by a CTRL-Z.</p>
<p>The optional <i>data</i> parameter can be used to pass extra user data that will be made available to the target slot in the <a href="qatresult.html#userData">QAtResult::userData</a>() field.</p>
<p>See also <a href="qatchat.html#chat">chat</a>().</p>
<h3 class="fn"><a name="dead"></a>void QAtChat::dead ()&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when the link is detected to be dead.</p>
<p>See also <a href="qatchat.html#deadTimeout">deadTimeout</a>() and <a href="qatchat.html#setDeadTimeout">setDeadTimeout</a>().</p>
<h3 class="fn"><a name="deadTimeout"></a>int QAtChat::deadTimeout () const</h3>
<p>Get the current link dead detection timeout in milliseconds. If this object sends a command to the link and it does not receive a response within the specified time, it will emit the <a href="qatchat.html#dead">dead</a>() signal. If the value is -1 (the default), the link dead detection timeout will be disabled.</p>
<p>When the link dead detection timeout expires, all pending commands will fail with <a href="qatresult.html#ResultCode-enum">QAtResult::Dead</a> as the result code.</p>
<p>See also <a href="qatchat.html#setDeadTimeout">setDeadTimeout</a>() and <a href="qatchat.html#dead">dead</a>().</p>
<h3 class="fn"><a name="pduNotification"></a>void QAtChat::pduNotification ( const <a href="qstring.html">QString</a> &amp; <i>type</i>, const <a href="qbytearray.html">QByteArray</a> &amp; <i>pdu</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when a PDU notification such as <tt>+CMT</tt>, <tt>+CDS</tt>, or <tt>+CBM</tt> arrives. The <i>type</i> parameter contains the type and PDU length (e.g. <tt>+CBM: 88</tt>), and the <i>pdu</i> parameter contains the binary data for the PDU.</p>
<h3 class="fn"><a name="registerErrorPrefix"></a>void QAtChat::registerErrorPrefix ( const <a href="qstring.html">QString</a> &amp; <i>type</i> )</h3>
<p>Register <i>type</i> as a prefix for error strings. Any line of data from the modem that starts with <i>type</i> will be recorded as a synonym for <tt>ERROR</tt>. This is to support modems that have non-standard error strings.</p>
<p>This function was introduced in Qtopia 4.2.1</p>
<h3 class="fn"><a name="registerNotificationType"></a>void QAtChat::registerNotificationType ( const <a href="qstring.html">QString</a> &amp; <i>type</i>, <a href="qobject.html">QObject</a> * <i>target</i>, const char * <i>slot</i>, bool <i>mayBeCommand</i> = false )</h3>
<p>Register <i>type</i> as an unsolicited notification on this object. Whenever a line is received from the modem that starts with <i>type</i>, the indicated <i>slot</i> on <i>target</i> will be called. The slot has the signature <tt>notification(const QString&amp;)</tt>. The entire notification, including the <i>type</i> prefix, will be passed to the slot.</p>
<p>If <i>mayBeCommand</i> is true, then the notification type may sometimes appear as a command result. When it does, the command's completion slot should be called, not the unsolicited notification slot. An example is <tt>+CREG:</tt>, which can appear in response to an <tt>AT+CREG</tt> command, or as an unsolicited notification.</p>
<h3 class="fn"><a name="requestNextLine"></a>void QAtChat::requestNextLine ( <a href="qobject.html">QObject</a> * <i>target</i>, const char * <i>slot</i> )</h3>
<p>Request that the next line from the modem be delivered to <i>slot</i> on <i>target</i>. This is used to collect up extra lines of data on an unsoliticited response. The slot takes a single <a href="qstring.html">QString</a> parameter.</p>
<h3 class="fn"><a name="resume"></a>void QAtChat::resume ()</h3>
<p>Resume the AT chat process after a suspension. Any data that is currently in the buffer will be processed for unsolicited notifications.</p>
<p>See also <a href="qatchat.html#suspend">suspend</a>().</p>
<h3 class="fn"><a name="retryOnNonEcho"></a>int QAtChat::retryOnNonEcho () const</h3>
<p>Get the retry on non-echo timeout. The default is -1.</p>
<p>See also <a href="qatchat.html#setRetryOnNonEcho">setRetryOnNonEcho</a>().</p>
<h3 class="fn"><a name="send"></a>void QAtChat::send ( const <a href="qstring.html">QString</a> &amp; <i>command</i> )</h3>
<p>Send <i>command</i> directly to the modem without waiting for a response, and without waiting for any existing commands to complete. This is typically used to send <tt>ATH</tt> to a modem to abort an <tt>ATD</tt> command.</p>
<h3 class="fn"><a name="setCPINTerminator"></a>void QAtChat::setCPINTerminator ()</h3>
<p>Set <tt>+CPIN</tt> as a terminator for the <tt>AT+CPIN?</tt> command. Needed on some modems that do not send <tt>OK</tt>.</p>
<h3 class="fn"><a name="setDeadTimeout"></a>void QAtChat::setDeadTimeout ( int <i>msec</i> )</h3>
<p>Set the link dead detection timeout to <i>msec</i> milliseconds. If this object sends a command to the link and it does not receive a response within the specified time, it will emit the <a href="qatchat.html#dead">dead</a>() signal. If <i>msec</i> is -1, the link dead detection timeout will be disabled.</p>
<p>When the link dead detection timeout expires, all pending commands will fail with <a href="qatresult.html#ResultCode-enum">QAtResult::Dead</a> as the result code.</p>
<p>See also <a href="qatchat.html#deadTimeout">deadTimeout</a>() and <a href="qatchat.html#dead">dead</a>().</p>
<h3 class="fn"><a name="setDebugChars"></a>void QAtChat::setDebugChars ( char <i>from</i>, char <i>to</i>, char <i>notify</i>, char <i>unknown</i> )</h3>
<p>Set the characters to use in debug output to <i>from</i>, <i>to</i>, <i>notify</i>, and <i>unknown</i>. The defaults are <tt>F</tt>, <tt>T</tt>, <tt>N</tt>, and <tt>?</tt>. The caller may wish to use different sets on separate channels so that it is clear from the debug output which channel is being used.</p>
<h3 class="fn"><a name="setRetryOnNonEcho"></a>void QAtChat::setRetryOnNonEcho ( int <i>msec</i> )</h3>
<p>Set the retry on non-echo timeout to <i>msec</i>. If <i>msec</i> is not -1, then if an AT command is not echoed by the modem within the time period, the command will be automatically retried. This is sometimes necessary to restart chat operations after a modem stall.</p>
<p>See also <a href="qatchat.html#retryOnNonEcho">retryOnNonEcho</a>().</p>
<h3 class="fn"><a name="suspend"></a>void QAtChat::suspend ()</h3>
<p>Suspend the AT chat process from the underlying device so that read() and write() can be used to process binary data. Call <a href="qatchat.html#resume">resume</a>() to restart the AT chat process after the binary data.</p>
<p>See also <a href="qatchat.html#resume">resume</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="30%">Copyright &copy; 2007 <a href="trolltech.html">Trolltech</a></td>
<td width="40%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td width="30%" align="right"><div align="right">Qtopia 4.2.2</div></td>
</tr></table></div></address></body>
</html>
