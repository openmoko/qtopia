<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>SXE - Application checklist</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qpelogo.png" align="left" width="32" height="32" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="annotated.html"><font color="#004faf">Annotated</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></td></tr></table><h1 align="center">SXE - Application checklist<br /><span class="subtitle"></span>
</h1>
<p>For an application to run correctly on an sxe-enabled device the following requirements should be observed. The code snippets are from the example <a href="application.html">application</a></p>
<a name="requirements"></a>
<h2>Requirements</h2>
<a name="source-code-requirements"></a>
<h3>Source Code Requirements</h3>
<ul>
<li>To correctly key an application, a couple of SXE related macros need to be used. The simplest and prefered way to do this is to use the <a href="qtopiaapplication.html#QTOPIA_MAIN">QTOPIA_MAIN</a> macro which implictly calls the SXE macros:<pre>    QTOPIA_ADD_APPLICATION(QTOPIA_TARGET, Example)
    QTOPIA_MAIN</pre>
<p>otherwise an application can explicitly use the <a href="sxeprograminfo.html#QSXE_APP_KEY">QSXE_APP_KEY</a> and <a href="sxeprograminfo.html#QSXE_SET_APP_KEY">QSXE_SET_APP_KEY</a>() macros as shown below:</p>
<pre>    QSXE_APP_KEY

    int MAIN_FUNC( int argc, char **argv )
    {
        <span class="comment">// This is required to load the SXE key into memory</span>
        QSXE_SET_APP_KEY(argv[0]);

        QtopiaApplication a( argc, argv );
        ...</pre>
</li>
</ul>
<a name="project-file-pro-requirements"></a>
<h3>Project file(.pro) Requirements</h3>
<ul>
<li>An application should typically delcare itself a qtopia application in the project file<pre>    qtopia_project(qtopia app) # see buildsystem.html for more project keywords</pre>
</li>
<li>The application needs to declare which domain(s) it will be using in the project file:<pre>    pkg.domain=window</pre>
<p>see <a href="#sxe-resolving-domains">SXE Resolving Domains</a> to decide which domain(s) to choose</p>
</li>
</ul>
<a name="sxe-resolving-domains"></a>
<h3>SXE Resolving Domains</h3>
<p>To determine which domains an application needs, the first step is to inspect the list of <a href="sxe-pkgmgr-profiles.html#policy-profile-examples">domains</a> and declare the appropriate domain such as bluetooth for a bluetooth application. All GUI applications should at least declare the <tt>window</tt> domain.</p>
<p>The second step is to run the application and observe if it breaches policy. This should naturally fit into the typical developer's edit, compile, test routine. Two types of policy breaches are possible: application level breaches and OS level breaches. In both cases, the errant application will be killed and synthetic SMS message is delivered to the user(provided the logging for security monitor is correctly setup).</p>
<p>The synthetic SMS message will contain the violation. Application level violations are of the form:</p>
<pre>    Violation: Request for foo was denied</pre>
<p>where <i>foo</i> is the denied request string.</p>
<p>An alternative means of determining the request string (even if security logging is not setup) is to look up the console/Qtopia log output, where the request denial will be of the form:</p>
<pre>    foo - denied: for Program Id 9 [PID 3476]</pre>
<p>One can then look up the sxe.profiles file and see which domain the request belongs to and declare that domain.</p>
<pre>    [ArbitraryDomain]
    ...
    foo
    ...</pre>
<p>OS level violations can vary but the most common type is show below:</p>
<pre>    Violation: Attempt to open foo for writing</pre>
<p>The corresponding log entry is of the form:</p>
<pre>    LIDS: bar (dev 100:32 inode 4119) pid 6027 ppid 1112 uid/gid (0/0) on (null tty) : Attempt to open foo for writing</pre>
<p>where <i>foo</i> is the path to a protected file. Determining the domain is a bit more tricky and involves perusing the domain scripts to see which domain gives permissions on a paritcular protected resource.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2007 <a href="trolltech.html">Trolltech</a></td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qtopia 4.3.0</div></td>
</tr></table></div></address></body>
</html>
