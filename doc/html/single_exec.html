<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Qtopia Single Exec</title>
<style type="text/css"><!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
body { background: #ffffff; color: black; }
--></style>
</head>
<body>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top"><a href="index.html"><img height="27" width="472" src="dochead.png" border="0"></a><br>
<font face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular" align="center" size=32>Qtopia</font>
   <a href="index.html">Home</a>
 - <a href="qtopiaclasses.html">Classes</a>
 - <a href="qtopiahierarchy.html">Hierachy</a>
 - <a href="qtopiaannotated.html">Annotated</a>
 - <a href="qtopiafunctions.html">Functions</a>
 - <a href="qtindex.html">Qt Embedded</a>
</td>
<td align="right" valign="top">
  <img height="100" width="100" src="qpelogo.png" align="top" border="0">
</td>
</tr>
</table><h1 align=center>Qtopia Single Exec</h1>



<a name="top"></a>
<!-- toc -->
<ul>
<li><a href="#1"> Introduction
</a>
<li><a href="#2"> Benefits
</a>
<li><a href="#3"> Explanation
</a>
<li><a href="#4"> How it works
</a>
<li><a href="#5"> Catches
</a>
<li><a href="#6"> Building single-exec
</a>
</ul>
<!-- endtoc -->

<p> <h2> Introduction
</h2>
<a name="1"></a><p> Qtopia can be compiled in a number of ways. The standard way is a fully dynamic build where each application is a separate binary run as a separate process.
There is also another way to compile Qtopia, and that is the single-exec way. This kind of build is a single binary, qpe and all the applications are linked
together in to a single large binary, however applications are still run as separate processes.
<p> <h2> Benefits
</h2>
<a name="2"></a><p> There are a number of benefits to single-exec.
<ul>
<li> As a single large binary, the size is overall smaller than many separate application binaries.
<li> Launch times can be faster when the libraries are all statically linked together with the applications.
<li> Statically linked single-exec builds can prevent new applications from being installed. 
<li> Dynamically linked single-exec builds can allow new applications, but will not be as fast as static builds. 
</ul>
<p> <h2> Explanation
</h2>
<a name="3"></a><p> The main idea behind single-exec is to make it possible to statically link the
libraries to the programs. Normally if you did this, the size would be massive,
each application having a copy of all the libraries. But by compiling all the application
code in to the one binary, this is not a problem. Normally if one did this, you
might just have one process, and in that process create new top level widgets of
the different applications within that process, but this is not a very stable
model, a single application fault brings down the whole system. Therefore it
is necessary to run the applications as separate processes.
<p> <h2> How it works
</h2>
<a name="4"></a><p> When we start a new application in single-exec, we fork the server process, and exec the same
binary again, but with an <tt>argv</tt> list that will inform the newly created process
what application it should be. This model is very similar to that used by
a UNIX tool called <em>busybox</em> which morphs in to different programs based on <tt>argv[0]</tt>.
<p> The size benefit of single-exec comes from static linking. When the linker
combines together the code, it can do various size optimizations such as
removing inline functions that are always included inline or removing redundant
or dead code that is not used by any of the applications, as well as not 
needing to include symbol tables usually needed for dynamic linking. Additionally
the code does not need to be PIC (position independent code) which gives additional size
and speed gains.
<p> <h2> Catches
</h2>
<a name="5"></a><p> One important thing to be aware of when building single-exec with additional
3rd party components is that the symbols can not clash with those from other
applications, use of C++ namespaces would be a very good idea to avoid
potential problems caused by this.
<p> <h2> Building single-exec
</h2>
<a name="6"></a><p> To build Qtopia as a single-exec binary, configure and build Qtopia normally with just the
addition of <tt>-singleexec</tt> to the options passed to Qtopia's configure script. The
result will be that no application binaries or plugins will be generated, instead, the
qpe binary will be larger than before, but contains all the code that would have
been in the other binaries. Additionally if you also wish to statically
link the Qt/Embedded, Qtopia and 3rd party libraries, add <tt>-static</tt> to the
arguments passed to the Qt/Embedded and Qtopia configure scripts.
<p> 
<!-- eof -->
<p><address><hr><div align="center">
<table width="100%" cellspacing="0" border="0">
<tr>
<td>Copyright &copy; 2001-2005 Trolltech
<td><a href="http://www.trolltech.com/trademarks.html">Trademarks</a>
<td align="right"><div align="right">Qtopia version 2.1.1</div>
</table></div></address></body>
</html>
