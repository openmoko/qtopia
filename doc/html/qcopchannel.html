<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Qt 4.2: QCopChannel Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.trolltech.com/products/qt"><img src="images/qt-logo.png" align="left" width="32" height="32" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="mainclasses.html"><font color="#004faf">Main&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped&nbsp;Classes</font></a>&nbsp;&middot; <a href="modules.html"><font color="#004faf">Modules</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="top" width="230"><a href="http://www.trolltech.com"><img src="images/trolltech-logo.png" align="right" width="203" height="32" border="0" /></a></td></tr></table><h1 align="center">QCopChannel Class Reference<br /><sup><sup>[<a href="qtgui.html">QtGui</a> module]</sup></sup></h1>
<p>The QCopChannel class provides communication capabilities between clients. <a href="#details">More...</a></p>
<pre> #include &lt;QCopChannel&gt;</pre><p>Inherits <a href="qobject.html">QObject</a>.</p>
<ul>
<li><a href="qcopchannel-members.html">List of all members, including inherited members</a></li>
<li><a href="qcopchannel-qt3.html">Qt 3 support members</a></li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/><b><a href="qcopchannel.html#QCopChannel">QCopChannel</a></b> ( const QString &amp; <i>channel</i>, QObject * <i>parent</i> = 0 )</li>
<li><div class="fn"/>virtual <b><a href="qcopchannel.html#dtor.QCopChannel">~QCopChannel</a></b> ()</li>
<li><div class="fn"/>QString <b><a href="qcopchannel.html#channel">channel</a></b> () const</li>
<li><div class="fn"/>virtual void <b><a href="qcopchannel.html#receive">receive</a></b> ( const QString &amp; <i>message</i>, const QByteArray &amp; <i>data</i> )</li>
</ul>
<ul>
<li><div class="fn"/>29 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
</ul>
<a name="signals"></a>
<h3>Signals</h3>
<ul>
<li><div class="fn"/>void <b><a href="qcopchannel.html#received">received</a></b> ( const QString &amp; <i>message</i>, const QByteArray &amp; <i>data</i> )</li>
</ul>
<ul>
<li><div class="fn"/>1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
</ul>
<a name="static-public-members"></a>
<h3>Static Public Members</h3>
<ul>
<li><div class="fn"/>bool <b><a href="qcopchannel.html#flush">flush</a></b> ()</li>
<li><div class="fn"/>bool <b><a href="qcopchannel.html#isRegistered">isRegistered</a></b> ( const QString &amp; <i>channel</i> )</li>
<li><div class="fn"/>bool <b><a href="qcopchannel.html#send">send</a></b> ( const QString &amp; <i>channel</i>, const QString &amp; <i>message</i>, const QByteArray &amp; <i>data</i> )</li>
<li><div class="fn"/>bool <b><a href="qcopchannel.html#send-2">send</a></b> ( const QString &amp; <i>channel</i>, const QString &amp; <i>message</i> )</li>
</ul>
<ul>
<li><div class="fn"/>5 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"/>1 property inherited from <a href="qobject.html#properties">QObject</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
<li><div class="fn"/>7 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QCopChannel class provides communication capabilities between clients.</p>
<p>QCOP is a many-to-many communication protocol for transferring messages on various channels. A channel is identified by a name, and anyone who wants to can listen to it. The QCOP protocol allows clients to communicate both within the same address space and between different processes, but it is currently only available for <a href="qtopiacore.html">Qtopia Core</a> (on X11 and Windows we are exploring the use of existing standards such as DCOP and COM).</p>
<p>Typically, QCopChannel is either used to send messages to a channel using the provided static functions, or to listen to the traffic on a channel by deriving from the class to take advantage of the provided functionality for receiving messages.</p>
<p>QCopChannel provides a couple of static functions which are usable without an object: The <a href="qcopchannel.html#send">send</a>() function, which sends the given message and data on the specified channel, and the <a href="qcopchannel.html#isRegistered">isRegistered</a>() function which queries the server for the existence of the given channel.</p>
<p>In addition, the QCopChannel class provides the <a href="qcopchannel.html#channel">channel</a>() function which returns the name of the object's channel, the virtual <a href="qcopchannel.html#receive">receive</a>() function which allows subclasses to process data received from their channel, and the <a href="qcopchannel.html#received">received</a>() signal which is emitted with the given message and data when a QCopChannel subclass receives a message from its channel.</p>
<p>See also <a href="qwsclient.html">QWSClient</a> and <a href="qtopiacore-running.html">Running Qtopia Core Applications</a>.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QCopChannel"></a>QCopChannel::QCopChannel ( const <a href="qstring.html">QString</a> &amp; <i>channel</i>, <a href="qobject.html">QObject</a> * <i>parent</i> = 0 )</h3>
<p>Constructs a QCop channel with the given <i>parent</i>, and registers it with the server using the given <i>channel</i> name.</p>
<p>See also <a href="qcopchannel.html#isRegistered">isRegistered</a>() and <a href="qcopchannel.html#channel">channel</a>().</p>
<h3 class="fn"><a name="dtor.QCopChannel"></a>QCopChannel::~QCopChannel ()&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Destroys the client's end of the channel and notifies the server that the client has closed its connection. The server will keep the channel open until the last registered client detaches.</p>
<p>See also <a href="qcopchannel.html#QCopChannel">QCopChannel</a>().</p>
<h3 class="fn"><a name="channel"></a><a href="qstring.html">QString</a> QCopChannel::channel () const</h3>
<p>Returns the name of the channel.</p>
<p>See also <a href="qcopchannel.html#QCopChannel">QCopChannel</a>().</p>
<h3 class="fn"><a name="flush"></a>bool QCopChannel::flush ()&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Flushes any pending messages queued through <a href="qcopchannel.html#send">QCopChannel::send</a>() to any subscribed clients. Returns false if no <a href="qapplication.html">QApplication</a> has been constructed, otherwise returns true. When using <a href="qcopchannel.html#send">QCopChannel::send</a>(), messages are queued and actually sent when Qt re-enters the event loop. By using this function, an application can immediately flush these queued messages, and therefore reliably know that any subscribed clients will receive them.</p>
<p>This function was introduced in Qt 4.2.</p>
<h3 class="fn"><a name="isRegistered"></a>bool QCopChannel::isRegistered ( const <a href="qstring.html">QString</a> &amp; <i>channel</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Queries the server for the existence of the given <i>channel</i>. Returns true if the channel is registered; otherwise returns false.</p>
<p>See also <a href="qcopchannel.html#channel">channel</a>() and <a href="qcopchannel.html#QCopChannel">QCopChannel</a>().</p>
<h3 class="fn"><a name="receive"></a>void QCopChannel::receive ( const <a href="qstring.html">QString</a> &amp; <i>message</i>, const <a href="qbytearray.html">QByteArray</a> &amp; <i>data</i> )&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>This virtual function allows subclasses of <a href="qcopchannel.html">QCopChannel</a> to process the given <i>message</i> and <i>data</i> received from their channel. The default implementation emits the <a href="qcopchannel.html#received">received</a>() signal.</p>
<p>Note that the format of the given <i>data</i> has to be well defined in order to extract the information it contains. In addition, it is recommended to use the DCOP convention. This is not a requirement, but you must ensure that the sender and receiver agree on the argument types.</p>
<p>Example:</p>
<pre> void MyClass::receive(const QString &amp;message, const QByteArray &amp;data)
 {
     QDataStream in(data);
     if (message == &quot;execute(QString,QString)&quot;) {
         QString cmd;
         QString arg;
         in &gt;&gt; cmd &gt;&gt; arg;
         ...
     } else if (message == &quot;delete(QString)&quot;) {
         QString fileName;
         in &gt;&gt; fileName;
         ...
     } else {
         ...
     }
 }</pre>
<p>This example assumes that the <tt>message</tt> is a DCOP-style function signature and the <tt>data</tt> contains the function's arguments.</p>
<p>See also <a href="qcopchannel.html#send">send</a>().</p>
<h3 class="fn"><a name="received"></a>void QCopChannel::received ( const <a href="qstring.html">QString</a> &amp; <i>message</i>, const <a href="qbytearray.html">QByteArray</a> &amp; <i>data</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted with the given <i>message</i> and <i>data</i> whenever the <a href="qcopchannel.html#receive">receive</a>() function gets incoming data.</p>
<p>See also <a href="qcopchannel.html#receive">receive</a>().</p>
<h3 class="fn"><a name="send"></a>bool QCopChannel::send ( const <a href="qstring.html">QString</a> &amp; <i>channel</i>, const <a href="qstring.html">QString</a> &amp; <i>message</i>, const <a href="qbytearray.html">QByteArray</a> &amp; <i>data</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Sends the given <i>message</i> on the specified <i>channel</i> with the given <i>data</i>. The message will be distributed to all clients subscribed to the channel. Returns true if the message is sent successfully; otherwise returns false.</p>
<p>It is recommended to use the DCOP convention. This is not a requirement, but you must ensure that the sender and receiver agree on the argument types.</p>
<p>Note that <a href="qdatastream.html">QDataStream</a> provides a convenient way to fill the byte array with auxiliary data.</p>
<p>Example:</p>
<pre> QByteArray data;
 QDataStream out(&amp;data, QIODevice::WriteOnly);
 out &lt;&lt; QString(&quot;cat&quot;) &lt;&lt; QString(&quot;file.txt&quot;);
 QCopChannel::send(&quot;System/Shell&quot;, &quot;execute(QString,QString)&quot;, data);</pre>
<p>Here the channel is <tt>&quot;System/Shell&quot;</tt>. The <tt>message</tt> is an arbitrary string, but in the example we've used the DCOP convention of passing a function signature. Such a signature is formatted as <tt>&quot;functionname(types)&quot;</tt> where <tt>types</tt> is a list of zero or more comma-separated type names, with no whitespace, no consts and no pointer or reference marks, i.e. no &quot;*&quot; or &quot;&amp;&quot;.</p>
<p>See also <a href="qcopchannel.html#receive">receive</a>().</p>
<h3 class="fn"><a name="send-2"></a>bool QCopChannel::send ( const <a href="qstring.html">QString</a> &amp; <i>channel</i>, const <a href="qstring.html">QString</a> &amp; <i>message</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>This is an overloaded member function, provided for convenience.</p>
<p>Sends the given <i>message</i> on the specified <i>channel</i>. The message will be distributed to all clients subscribed to the channel.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QCopChannel-2"></a>QCopChannel::QCopChannel ( const <a href="qstring.html">QString</a> &amp; <i>channel</i>, <a href="qobject.html">QObject</a> * <i>parent</i>, const char * <i>name</i> )</h3>
<p>Use the two argument overload, and call <a href="qobject.html#objectName-prop">setObjectName</a>() to <i>name</i> the instance, instead.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="30%">Copyright &copy; 2006 <a href="trolltech.html">Trolltech</a></td>
<td width="40%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td width="30%" align="right"><div align="right">Qt 4.2.2</div></td>
</tr></table></div></address></body>
</html>
