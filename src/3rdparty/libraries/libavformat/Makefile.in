#############################################################################

####### Compiler, tools and options

CXX	=	$(SYSCONF_CXX) $(QT_CXX_MT)
CXXFLAGS=	$(SYSCONF_CXXFLAGS) $(SYSCONF_CXXFLAGS_LIB) -DHAVE_AV_CONFIG_H -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_GNU_SOURCE
CC	=	$(SYSCONF_CC) $(QT_C_MT)
CFLAGS	=	$(SYSCONF_CFLAGS) $(SYSCONF_CFLAGS_LIB) -DHAVE_AV_CONFIG_H -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_GNU_SOURCE
INCPATH =	-I$(MOC_DIR) -I. -I.. -I../libavcodec
LFLAGS	=	$(SYSCONF_LFLAGS) $(QT_LFLAGS_MT)
LIBS	=	$(SUBLIBS)  $(SYSCONF_LIBS_QTAPP)
MOC	=	$(SYSCONF_MOC)
UIC	=	$(SYSCONF_UIC)

####### Target

DESTDIR = $(QPEDIR)/lib/
VER_MAJ = 1
VER_MIN = 0
VER_PATCH = 0
TARGET	= avformat
TARGET1 = lib$(TARGET).so.$(VER_MAJ)

####### Files

HEADERS =	
SOURCES =	allformats.c \
		asf.c \
		au.c \
		avidec.c \
		avio.c \
		aviobuf.c \
		crc.c \
		cutils.c \
		ffm.c \
		file.c \
		gif.c \
		http.c \
		img.c \
		jpeg.c \
		mov.c \
		mpeg.c \
		mpegts.c \
		raw.c \
		rm.c \
		rtp.c \
		rtpproto.c \
		rtsp.c \
		swf.c \
		tcp.c \
		udp.c \
		utils.c \
		wav.c \
		avienc.c \
		dv.c
OBJECTS =	$(OBJECTS_DIR)/allformats.o \
		$(OBJECTS_DIR)/asf.o \
		$(OBJECTS_DIR)/au.o \
		$(OBJECTS_DIR)/avidec.o \
		$(OBJECTS_DIR)/avio.o \
		$(OBJECTS_DIR)/aviobuf.o \
		$(OBJECTS_DIR)/crc.o \
		$(OBJECTS_DIR)/cutils.o \
		$(OBJECTS_DIR)/ffm.o \
		$(OBJECTS_DIR)/file.o \
		$(OBJECTS_DIR)/gif.o \
		$(OBJECTS_DIR)/http.o \
		$(OBJECTS_DIR)/img.o \
		$(OBJECTS_DIR)/jpeg.o \
		$(OBJECTS_DIR)/mov.o \
		$(OBJECTS_DIR)/mpeg.o \
		$(OBJECTS_DIR)/mpegts.o \
		$(OBJECTS_DIR)/raw.o \
		$(OBJECTS_DIR)/rm.o \
		$(OBJECTS_DIR)/rtp.o \
		$(OBJECTS_DIR)/rtpproto.o \
		$(OBJECTS_DIR)/rtsp.o \
		$(OBJECTS_DIR)/swf.o \
		$(OBJECTS_DIR)/tcp.o \
		$(OBJECTS_DIR)/udp.o \
		$(OBJECTS_DIR)/utils.o \
		$(OBJECTS_DIR)/wav.o \
		$(OBJECTS_DIR)/avienc.o \
		$(OBJECTS_DIR)/dv.o
INTERFACES =    
UICDECLS =      
UICIMPLS =      
SRCMOC	=	
OBJMOC	=	


####### Implicit rules

.SUFFIXES: .cpp .cxx .cc .C .c

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cxx.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cc.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.C.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.c.o:
	$(CC) -c $(CFLAGS) $(INCPATH) -o $@ $<

####### Build rules


all: $(DESTDIR)$(SYSCONF_LINK_TARGET)

$(DESTDIR)$(SYSCONF_LINK_TARGET): $(UICDECLS) $(OBJECTS) $(OBJMOC) $(SUBLIBS)
	$(SYSCONF_LINK_LIB)

moc: $(SRCMOC)

tmake:
	tmake libavformat.pro

clean:
	-rm -f $(OBJECTS) $(OBJMOC) $(SRCMOC) $(UICIMPLS) $(UICDECLS)
	-rm -f *~ core
	-rm -f allmoc.cpp

####### Extension Modules

listpromodules:
	@echo 

listallmodules:
	@echo 

listaddonpromodules:
	@echo 

listaddonentmodules:
	@echo 


REQUIRES=

####### Sub-libraries


###### Combined headers



####### Compile

$(OBJECTS_DIR)/allformats.o: allformats.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/allformats.o allformats.c

$(OBJECTS_DIR)/asf.o: asf.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		avi.h \
		../libavcodec/mpegaudio.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/asf.o asf.c

$(OBJECTS_DIR)/au.o: au.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		avi.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/au.o au.c

$(OBJECTS_DIR)/avidec.o: avidec.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		avi.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/avidec.o avidec.c

$(OBJECTS_DIR)/avio.o: avio.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/avio.o avio.c

$(OBJECTS_DIR)/aviobuf.o: aviobuf.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/aviobuf.o aviobuf.c

$(OBJECTS_DIR)/crc.o: crc.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/crc.o crc.c

$(OBJECTS_DIR)/cutils.o: cutils.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/cutils.o cutils.c

$(OBJECTS_DIR)/ffm.o: ffm.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/ffm.o ffm.c

$(OBJECTS_DIR)/file.o: file.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/file.o file.c

$(OBJECTS_DIR)/gif.o: gif.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/gif.o gif.c

$(OBJECTS_DIR)/http.o: http.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		barpainet.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/http.o http.c

$(OBJECTS_DIR)/img.o: img.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/img.o img.c

$(OBJECTS_DIR)/jpeg.o: jpeg.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/jpeg.o jpeg.c

$(OBJECTS_DIR)/mov.o: mov.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		avi.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/mov.o mov.c

$(OBJECTS_DIR)/mpeg.o: mpeg.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/mpeg.o mpeg.c

$(OBJECTS_DIR)/mpegts.o: mpegts.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/mpegts.o mpegts.c

$(OBJECTS_DIR)/raw.o: raw.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/raw.o raw.c

$(OBJECTS_DIR)/rm.o: rm.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/rm.o rm.c

$(OBJECTS_DIR)/rtp.o: rtp.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		barpainet.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/rtp.o rtp.c

$(OBJECTS_DIR)/rtpproto.o: rtpproto.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		barpainet.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/rtpproto.o rtpproto.c

$(OBJECTS_DIR)/rtsp.o: rtsp.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		barpainet.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/rtsp.o rtsp.c

$(OBJECTS_DIR)/swf.o: swf.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/swf.o swf.c

$(OBJECTS_DIR)/tcp.o: tcp.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		barpainet.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/tcp.o tcp.c

$(OBJECTS_DIR)/udp.o: udp.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		barpainet.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/udp.o udp.c

$(OBJECTS_DIR)/utils.o: utils.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		strptime.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/utils.o utils.c

$(OBJECTS_DIR)/wav.o: wav.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		avi.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/wav.o wav.c

$(OBJECTS_DIR)/avienc.o: avienc.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h \
		avi.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/avienc.o avienc.c

$(OBJECTS_DIR)/dv.o: dv.c \
		avformat.h \
		../libavcodec/avcodec.h \
		../libavcodec/common.h \
		config.h \
		../libavcodec/fastmemcpy.h \
		../libavcodec/bswap.h \
		avio.h \
		rtp.h \
		rtsp.h \
		rtspcodes.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o $(OBJECTS_DIR)/dv.o dv.c


